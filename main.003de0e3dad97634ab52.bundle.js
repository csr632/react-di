(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),react_default=__webpack_require__.n(react),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function useInit(initer){var _a=react.useState(useInit.INIT_NOT_DONE),inited=_a[0],setInited=_a[1];return react.useLayoutEffect((function(){var ret=initer();!function isPromise(value){return utils_isObject(value)&&"function"==typeof value.then}(ret)?setInited(ret):ret.then(setInited)}),[]),inited}!function(useInit){useInit.INIT_NOT_DONE=Symbol("init_not_done")}(useInit||(useInit={}));var withInit=function(initer){return function(Wrapped){var HOC=function(props){var inited=useInit(initer);if(inited===useInit.INIT_NOT_DONE)return null;var actualProps=__assign(__assign({},props),inited);return react.createElement(Wrapped,__assign({},actualProps))};return HOC.displayName="WithInit",HOC}};function useSyncInit(initer){return react.useState(initer)[0]}try{useInit.displayName="useInit",useInit.__docgenInfo={description:"",displayName:"useInit",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/init.tsx#useInit"]={docgenInfo:useInit.__docgenInfo,name:"useInit",path:"src/utils/init.tsx#useInit"})}catch(__react_docgen_typescript_loader_error){}try{useSyncInit.displayName="useSyncInit",useSyncInit.__docgenInfo={description:"",displayName:"useSyncInit",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/init.tsx#useSyncInit"]={docgenInfo:useSyncInit.__docgenInfo,name:"useSyncInit",path:"src/utils/init.tsx#useSyncInit"})}catch(__react_docgen_typescript_loader_error){}try{withInit.displayName="withInit",withInit.__docgenInfo={description:"",displayName:"withInit",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/init.tsx#withInit"]={docgenInfo:withInit.__docgenInfo,name:"withInit",path:"src/utils/init.tsx#withInit"})}catch(__react_docgen_typescript_loader_error){}function usePrevious_usePrevious(value){var ref=react.useRef(usePrevious_usePrevious.NO_PREVIOUS);return react.useEffect((function(){ref.current=value})),ref.current}function usePrevious_useAssertValueNotChange(value){var prev=react.useRef(value);if(value!==prev.current)throw console.error("useAssertValueNotChange check fail.\n    Prev:",prev,"\nCurrent:",value),new Error("useAssertValueNotChange check fail:\n      prev: "+prev+", current: "+value)}!function(usePrevious){usePrevious.NO_PREVIOUS=Symbol("no previous")}(usePrevious_usePrevious||(usePrevious_usePrevious={}));try{usePrevious_usePrevious.displayName="usePrevious",usePrevious_usePrevious.__docgenInfo={description:"",displayName:"usePrevious",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/usePrevious.ts#usePrevious"]={docgenInfo:usePrevious_usePrevious.__docgenInfo,name:"usePrevious",path:"src/utils/usePrevious.ts#usePrevious"})}catch(__react_docgen_typescript_loader_error){}try{usePrevious_useAssertValueNotChange.displayName="useAssertValueNotChange",usePrevious_useAssertValueNotChange.__docgenInfo={description:"",displayName:"useAssertValueNotChange",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/usePrevious.ts#useAssertValueNotChange"]={docgenInfo:usePrevious_useAssertValueNotChange.__docgenInfo,name:"useAssertValueNotChange",path:"src/utils/usePrevious.ts#useAssertValueNotChange"})}catch(__react_docgen_typescript_loader_error){}function useObservable_useObservable(observable,initialValue){var forceUpdate=Object(react.useReducer)((function(x,_){return x+1}),0)[1],_b=Object(react.useState)(initialValue),state=_b[0],setState=_b[1];return function useObservableCB(observable,next,error,complete){Object(react.useEffect)((function(){var sub=observable.subscribe(next,error,complete);return function(){return sub.unsubscribe()}}),[complete,error,next,observable])}(observable,Object(react.useCallback)((function(nextVal){setState(nextVal),forceUpdate(null)}),[])),state}try{useObservable_useObservable.displayName="useObservable",useObservable_useObservable.__docgenInfo={description:"",displayName:"useObservable",props:{_isScalar:{defaultValue:null,description:"Internal implementation detail, do not use directly.",name:"_isScalar",required:!0,type:{name:"boolean"}},source:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"source",required:!0,type:{name:"Observable<any>"}},operator:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"operator",required:!0,type:{name:"Operator<any, ValueType>"}},lift:{defaultValue:null,description:"Creates a new Observable, with this Observable as the source, and the passed\noperator defined as the new observable's operator.\n@method lift\n@param operator the operator defining the operation to take on the observable\n@return a new observable with the Operator applied",name:"lift",required:!0,type:{name:"<R>(operator: Operator<ValueType, R>) => Observable<R>"}},subscribe:{defaultValue:null,description:"@deprecated Use an observer instead of a complete callback\n@deprecated Use an observer instead of an error callback\n@deprecated Use an observer instead of a complete callback",name:"subscribe",required:!0,type:{name:"{ (observer?: PartialObserver<ValueType>): Subscription; (next: null, error: null, complete: () => void): Subscription; (next: null, error: (error: any) => void, complete?: () => void): Subscription; (next: (value: ValueType) => void, error: null, complete: () => void): Subscription; (next?: (value: ValueType) => vo..."}},_trySubscribe:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"_trySubscribe",required:!0,type:{name:"(sink: Subscriber<ValueType>) => TeardownLogic"}},forEach:{defaultValue:null,description:"@method forEach\n@param next a handler for each value emitted by the observable\n@param promiseCtor a constructor function used to instantiate the Promise\n@return a promise that either resolves on observable completion or\nrejects with the handled error",name:"forEach",required:!0,type:{name:"(next: (value: ValueType) => void, promiseCtor?: PromiseConstructorLike) => Promise<void>"}},_subscribe:{defaultValue:null,description:"@internal This is an internal implementation detail, do not use.",name:"_subscribe",required:!0,type:{name:"(subscriber: Subscriber<any>) => TeardownLogic"}},pipe:{defaultValue:null,description:"",name:"pipe",required:!0,type:{name:"{ (): Observable<ValueType>; <A>(op1: OperatorFunction<ValueType, A>): Observable<A>; <A, B>(op1: OperatorFunction<ValueType, A>, op2: OperatorFunction<...>): Observable<...>; <A, B, C>(op1: OperatorFunction<...>, op2: OperatorFunction<...>, op3: OperatorFunction<...>): Observable<...>; <A, B, C, D>(op1: OperatorFun..."}},toPromise:{defaultValue:null,description:"",name:"toPromise",required:!0,type:{name:"{ <T>(this: Observable<T>): Promise<T>; <T>(this: Observable<T>, PromiseCtor: any): Promise<T>; <T>(this: Observable<...>, PromiseCtor: PromiseConstructorLike): Promise<...>; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/useObservable.ts#useObservable"]={docgenInfo:useObservable_useObservable.__docgenInfo,name:"useObservable",path:"src/utils/useObservable.ts#useObservable"})}catch(__react_docgen_typescript_loader_error){}function utils_isObject(value){return!!value&&"object"==typeof value}try{utils_isObject.displayName="isObject",utils_isObject.__docgenInfo={description:"",displayName:"isObject",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/index.ts#isObject"]={docgenInfo:utils_isObject.__docgenInfo,name:"isObject",path:"src/utils/index.ts#isObject"})}catch(__react_docgen_typescript_loader_error){}try{usePrevious.displayName="usePrevious",usePrevious.__docgenInfo={description:"",displayName:"usePrevious",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/index.ts#usePrevious"]={docgenInfo:usePrevious.__docgenInfo,name:"usePrevious",path:"src/utils/index.ts#usePrevious"})}catch(__react_docgen_typescript_loader_error){}try{useAssertValueNotChange.displayName="useAssertValueNotChange",useAssertValueNotChange.__docgenInfo={description:"",displayName:"useAssertValueNotChange",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/index.ts#useAssertValueNotChange"]={docgenInfo:useAssertValueNotChange.__docgenInfo,name:"useAssertValueNotChange",path:"src/utils/index.ts#useAssertValueNotChange"})}catch(__react_docgen_typescript_loader_error){}try{useObservable.displayName="useObservable",useObservable.__docgenInfo={description:"",displayName:"useObservable",props:{_isScalar:{defaultValue:null,description:"Internal implementation detail, do not use directly.",name:"_isScalar",required:!0,type:{name:"boolean"}},source:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"source",required:!0,type:{name:"Observable<any>"}},operator:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"operator",required:!0,type:{name:"Operator<any, ValueType>"}},lift:{defaultValue:null,description:"Creates a new Observable, with this Observable as the source, and the passed\noperator defined as the new observable's operator.\n@method lift\n@param operator the operator defining the operation to take on the observable\n@return a new observable with the Operator applied",name:"lift",required:!0,type:{name:"<R>(operator: Operator<ValueType, R>) => Observable<R>"}},subscribe:{defaultValue:null,description:"@deprecated Use an observer instead of a complete callback\n@deprecated Use an observer instead of an error callback\n@deprecated Use an observer instead of a complete callback",name:"subscribe",required:!0,type:{name:"{ (observer?: PartialObserver<ValueType>): Subscription; (next: null, error: null, complete: () => void): Subscription; (next: null, error: (error: any) => void, complete?: () => void): Subscription; (next: (value: ValueType) => void, error: null, complete: () => void): Subscription; (next?: (value: ValueType) => vo..."}},_trySubscribe:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"_trySubscribe",required:!0,type:{name:"(sink: Subscriber<ValueType>) => TeardownLogic"}},forEach:{defaultValue:null,description:"@method forEach\n@param next a handler for each value emitted by the observable\n@param promiseCtor a constructor function used to instantiate the Promise\n@return a promise that either resolves on observable completion or\nrejects with the handled error",name:"forEach",required:!0,type:{name:"(next: (value: ValueType) => void, promiseCtor?: PromiseConstructorLike) => Promise<void>"}},_subscribe:{defaultValue:null,description:"@internal This is an internal implementation detail, do not use.",name:"_subscribe",required:!0,type:{name:"(subscriber: Subscriber<any>) => TeardownLogic"}},pipe:{defaultValue:null,description:"",name:"pipe",required:!0,type:{name:"{ (): Observable<ValueType>; <A>(op1: OperatorFunction<ValueType, A>): Observable<A>; <A, B>(op1: OperatorFunction<ValueType, A>, op2: OperatorFunction<...>): Observable<...>; <A, B, C>(op1: OperatorFunction<...>, op2: OperatorFunction<...>, op3: OperatorFunction<...>): Observable<...>; <A, B, C, D>(op1: OperatorFun..."}},toPromise:{defaultValue:null,description:"",name:"toPromise",required:!0,type:{name:"{ <T>(this: Observable<T>): Promise<T>; <T>(this: Observable<T>, PromiseCtor: any): Promise<T>; <T>(this: Observable<...>, PromiseCtor: PromiseConstructorLike): Promise<...>; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/index.ts#useObservable"]={docgenInfo:useObservable.__docgenInfo,name:"useObservable",path:"src/utils/index.ts#useObservable"})}catch(__react_docgen_typescript_loader_error){}var types_CustomToken=function(){function CustomToken(tokenId){this.tokenId=tokenId,this._reflectName=CustomToken.tokenReflectName}return CustomToken.isCustomToken=function(value){return utils_isObject(value)&&value._reflectName===CustomToken.tokenReflectName},CustomToken.tokenReflectName="@@react-svs-di Token v1@@",CustomToken}();function types_isToken(value){return types_CustomToken.isCustomToken(value)||types_isServiceCtor(value)||"symbol"==typeof value}function types_getActualToken(token){if(!types_isToken(token))throw console.error("The given token is invalid.\n    Fail to provide this token.\n    Token:",token),new Error("The given token is invalid.\n    Fail to provide this token.\n    See the console.error above.");return types_CustomToken.isCustomToken(token)?token.tokenId:token}function types_isServiceCtor(value){return"function"==typeof value&&utils_isObject(value.prototype)&&value.prototype.constructor===value}function types_isClassProvider(value){return utils_isObject(value)&&types_isToken(value.provide)&&types_isServiceCtor(value.useClass)}function types_isExistingProvider(value){return utils_isObject(value)&&types_isToken(value.provide)&&types_isToken(value.useExisting)}function types_isValueProvider(value){return utils_isObject(value)&&types_isToken(value.provide)&&{}.hasOwnProperty.call(value,"useValue")}function types_isFactoryProvider(value){return utils_isObject(value)&&types_isToken(value.provide)&&"function"==typeof value.useFactory}try{types_isToken.displayName="isToken",types_isToken.__docgenInfo={description:"",displayName:"isToken",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/types.ts#isToken"]={docgenInfo:types_isToken.__docgenInfo,name:"isToken",path:"src/di/types.ts#isToken"})}catch(__react_docgen_typescript_loader_error){}try{types_getActualToken.displayName="getActualToken",types_getActualToken.__docgenInfo={description:"",displayName:"getActualToken",props:{toString:{defaultValue:null,description:"Returns a string representation of an object.\nReturns a string representation of an object.\nReturns a string representation of a function.",name:"toString",required:!1,type:{name:"(() => string) | ((() => string) & (() => string)) | (() => string)"}},valueOf:{defaultValue:null,description:"Returns the primitive value of the specified object.\nReturns the primitive value of the specified object.",name:"valueOf",required:!1,type:{name:"(() => symbol) | (() => Object)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/types.ts#getActualToken"]={docgenInfo:types_getActualToken.__docgenInfo,name:"getActualToken",path:"src/di/types.ts#getActualToken"})}catch(__react_docgen_typescript_loader_error){}try{types_isServiceCtor.displayName="isServiceCtor",types_isServiceCtor.__docgenInfo={description:"",displayName:"isServiceCtor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/types.ts#isServiceCtor"]={docgenInfo:types_isServiceCtor.__docgenInfo,name:"isServiceCtor",path:"src/di/types.ts#isServiceCtor"})}catch(__react_docgen_typescript_loader_error){}try{types_isClassProvider.displayName="isClassProvider",types_isClassProvider.__docgenInfo={description:"",displayName:"isClassProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/types.ts#isClassProvider"]={docgenInfo:types_isClassProvider.__docgenInfo,name:"isClassProvider",path:"src/di/types.ts#isClassProvider"})}catch(__react_docgen_typescript_loader_error){}try{types_isExistingProvider.displayName="isExistingProvider",types_isExistingProvider.__docgenInfo={description:"",displayName:"isExistingProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/types.ts#isExistingProvider"]={docgenInfo:types_isExistingProvider.__docgenInfo,name:"isExistingProvider",path:"src/di/types.ts#isExistingProvider"})}catch(__react_docgen_typescript_loader_error){}try{types_isValueProvider.displayName="isValueProvider",types_isValueProvider.__docgenInfo={description:"",displayName:"isValueProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/types.ts#isValueProvider"]={docgenInfo:types_isValueProvider.__docgenInfo,name:"isValueProvider",path:"src/di/types.ts#isValueProvider"})}catch(__react_docgen_typescript_loader_error){}try{types_isFactoryProvider.displayName="isFactoryProvider",types_isFactoryProvider.__docgenInfo={description:"",displayName:"isFactoryProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/types.ts#isFactoryProvider"]={docgenInfo:types_isFactoryProvider.__docgenInfo,name:"isFactoryProvider",path:"src/di/types.ts#isFactoryProvider"})}catch(__react_docgen_typescript_loader_error){}var ctx=react.createContext(null);ctx.displayName="DIContainerContext";var di_context=ctx,__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};function useDIConsumer(tokens){var injector=react.useContext(di_context);if(!injector)throw new Error("Can't find DI container.\n      You must use withDIContainer somewhere above the component tree.");return usePrevious_useAssertValueNotChange(injector),react.useMemo((function(){return tokens.map((function(oneToken){var actualToken=types_getActualToken(oneToken);try{return injector.get(actualToken)}catch(error){if(console.error("Fail to get value from injector. \nToken:",oneToken,"\nOriginal error:",error),error.message.indexOf("No matching bindings found")>=0)throw new Error("Can't find value to inject.\n              You should provide it somewhere above the component tree. (use withDIContainer)\n              See the console.error above for more info.");throw error}}))}),__spreadArrays([injector],tokens))}try{useDIConsumer.displayName="useDIConsumer",useDIConsumer.__docgenInfo={description:"",displayName:"useDIConsumer",props:{0:{defaultValue:null,description:"",name:"0",required:!0,type:{name:"IToken"}},length:{defaultValue:null,description:"",name:"length",required:!0,type:{name:"number"}},toString:{defaultValue:null,description:"Returns a string representation of an array.",name:"toString",required:!1,type:{name:"() => string"}},toLocaleString:{defaultValue:null,description:"Returns a string representation of an array. The elements are converted to string using their toLocalString methods.",name:"toLocaleString",required:!1,type:{name:"() => string"}},pop:{defaultValue:null,description:"Removes the last element from an array and returns it.",name:"pop",required:!0,type:{name:"() => IToken"}},push:{defaultValue:null,description:"Appends new elements to an array, and returns the new length of the array.\n@param items New elements of the Array.",name:"push",required:!0,type:{name:"(...items: IToken[]) => number"}},concat:{defaultValue:null,description:"Combines two or more arrays.\nCombines two or more arrays.\n@param items Additional items to add to the end of array1.\n@param items Additional items to add to the end of array1.",name:"concat",required:!0,type:{name:"{ (...items: ConcatArray<IToken>[]): IToken[]; (...items: (symbol | CustomToken<any> | AbstractCtor<object> | ConcatArray<IToken>)[]): IToken[]; }"}},join:{defaultValue:null,description:"Adds all the elements of an array separated by the specified separator string.\n@param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.",name:"join",required:!0,type:{name:"(separator?: string) => string"}},reverse:{defaultValue:null,description:"Reverses the elements in an Array.",name:"reverse",required:!0,type:{name:"() => IToken[]"}},shift:{defaultValue:null,description:"Removes the first element from an array and returns it.",name:"shift",required:!0,type:{name:"() => IToken"}},slice:{defaultValue:null,description:"Returns a section of an array.\n@param start The beginning of the specified portion of the array.\n@param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.",name:"slice",required:!0,type:{name:"(start?: number, end?: number) => IToken[]"}},sort:{defaultValue:null,description:"Sorts an array.\n@param compareFn Function used to determine the order of the elements. It is expected to return\ra negative value if first argument is less than second argument, zero if they're equal and a positive\rvalue otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\r```ts\r[11,2,22,1].sort((a, b) => a - b)\r```",name:"sort",required:!0,type:{name:"(compareFn?: (a: IToken, b: IToken) => number) => Tokens"}},splice:{defaultValue:null,description:"Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\nRemoves elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param items Elements to insert into the array in place of the deleted elements.",name:"splice",required:!0,type:{name:"{ (start: number, deleteCount?: number): IToken[]; (start: number, deleteCount: number, ...items: IToken[]): IToken[]; }"}},unshift:{defaultValue:null,description:"Inserts new elements at the start of an array.\n@param items Elements to insert at the start of the Array.",name:"unshift",required:!0,type:{name:"(...items: IToken[]) => number"}},indexOf:{defaultValue:null,description:"Returns the index of the first occurrence of a value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.",name:"indexOf",required:!0,type:{name:"(searchElement: IToken, fromIndex?: number) => number"}},lastIndexOf:{defaultValue:null,description:"Returns the index of the last occurrence of a specified value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.",name:"lastIndexOf",required:!0,type:{name:"(searchElement: IToken, fromIndex?: number) => number"}},every:{defaultValue:null,description:"Determines whether all the members of an array satisfy the specified test.\n@param callbackfn A function that accepts up to three arguments. The every method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value false, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"every",required:!0,type:{name:"(callbackfn: (value: IToken, index: number, array: IToken[]) => unknown, thisArg?: any) => boolean"}},some:{defaultValue:null,description:"Determines whether the specified callback function returns true for any element of an array.\n@param callbackfn A function that accepts up to three arguments. The some method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value true, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"some",required:!0,type:{name:"(callbackfn: (value: IToken, index: number, array: IToken[]) => unknown, thisArg?: any) => boolean"}},forEach:{defaultValue:null,description:"Performs the specified action for each element in an array.\n@param callbackfn A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"forEach",required:!0,type:{name:"(callbackfn: (value: IToken, index: number, array: IToken[]) => void, thisArg?: any) => void"}},map:{defaultValue:null,description:"Calls a defined callback function on each element of an array, and returns an array that contains the results.\n@param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"map",required:!0,type:{name:"<U>(callbackfn: (value: IToken, index: number, array: IToken[]) => U, thisArg?: any) => U[]"}},filter:{defaultValue:null,description:"Returns the elements of an array that meet the condition specified in a callback function.\nReturns the elements of an array that meet the condition specified in a callback function.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"filter",required:!0,type:{name:"{ <S extends IToken>(callbackfn: (value: IToken, index: number, array: IToken[]) => value is S, thisArg?: any): S[]; (callbackfn: (value: IToken, index: number, array: IToken[]) => unknown, thisArg?: any): IToken[]; }"}},reduce:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduce",required:!0,type:{name:"{ (callbackfn: (previousValue: IToken, currentValue: IToken, currentIndex: number, array: IToken[]) => IToken): IToken; (callbackfn: (previousValue: IToken, currentValue: IToken, currentIndex: number, array: IToken[]) => IToken, initialValue: IToken): IToken; <U>(callbackfn: (previousValue: U, currentValue: IToken, ..."}},reduceRight:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduceRight",required:!0,type:{name:"{ (callbackfn: (previousValue: IToken, currentValue: IToken, currentIndex: number, array: IToken[]) => IToken): IToken; (callbackfn: (previousValue: IToken, currentValue: IToken, currentIndex: number, array: IToken[]) => IToken, initialValue: IToken): IToken; <U>(callbackfn: (previousValue: U, currentValue: IToken, ..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/consumer.tsx#useDIConsumer"]={docgenInfo:useDIConsumer.__docgenInfo,name:"useDIConsumer",path:"src/di/consumer.tsx#useDIConsumer"})}catch(__react_docgen_typescript_loader_error){}var ELifeCycle,inversify=__webpack_require__(79),Subject=__webpack_require__(24),take=__webpack_require__(704),takeUntil=__webpack_require__(691);!function(ELifeCycle){ELifeCycle[ELifeCycle.mount=0]="mount",ELifeCycle[ELifeCycle.unMount=1]="unMount"}(ELifeCycle||(ELifeCycle={}));var lifeCycle_LifeCycle=function(){function LifeCycle(){this._mount$=new Subject.a,this._unMount$=new Subject.a,this.mount$=this._mount$.pipe(Object(take.a)(1)),this.unMount$=this._unMount$.pipe(Object(take.a)(1)),this.componentId=null,this.state=0}return LifeCycle.prototype.checkComponent=function(currentId){if(this.componentId){if(this.componentId!==currentId)throw new Error("lifecycle is bound to multiple component instance")}else this.componentId=currentId},LifeCycle.prototype.mount=function(){if(0!==this.state)throw new Error("lifecycle error: mounted multiple times");this._mount$.next(),this.state=1},LifeCycle.prototype.unMount=function(){if(1!==this.state)throw new Error("lifecycle error: mounted multiple times");this._unMount$.next(),this.state=2},LifeCycle.prototype.subscribeInLifeCycle=function(observable,next,error,complete){var _this=this;0===this.state?this.mount$.subscribe((function(){observable.pipe(Object(takeUntil.a)(_this.unMount$)).subscribe(next,error,complete)})):1===this.state&&observable.pipe(Object(takeUntil.a)(this.unMount$)).subscribe(next,error,complete)},LifeCycle}();function useBindLifeCycle(lifeCycle,opts){void 0===opts&&(opts={});var _a=opts.setup,setup=void 0===_a?null:_a;usePrevious_useAssertValueNotChange(lifeCycle),usePrevious_useAssertValueNotChange(setup);var compId=function useCompId(){return react.useRef()}(),lifeCycleInternal=lifeCycle;react.useEffect((function(){lifeCycleInternal.checkComponent(compId)})),react.useLayoutEffect((function(){lifeCycleInternal.checkComponent(compId);var cleanup="function"==typeof setup?setup():void 0;return lifeCycleInternal.mount(),function(){lifeCycleInternal.unMount(),"function"==typeof cleanup&&cleanup()}}),[compId,lifeCycleInternal,setup])}var lifeCycle_DIPluginAutoBindLifeCycle=function(allProvidedValues){useSyncInit((function(){var result=[];return allProvidedValues.forEach((function(_a){var value=_a.value;utils_isObject(value)&&value.autoLifeCycle instanceof lifeCycle_LifeCycle&&result.push(value.autoLifeCycle)})),result})).forEach((function(autoLifeCycle){useBindLifeCycle(autoLifeCycle)}))};try{lifeCycle_DIPluginAutoBindLifeCycle.displayName="DIPluginAutoBindLifeCycle",lifeCycle_DIPluginAutoBindLifeCycle.__docgenInfo={description:"",displayName:"DIPluginAutoBindLifeCycle",props:{length:{defaultValue:null,description:"Gets or sets the length of the array. This is a number one higher than the highest element defined in an array.",name:"length",required:!0,type:{name:"number"}},toString:{defaultValue:null,description:"Returns a string representation of an array.",name:"toString",required:!1,type:{name:"() => string"}},toLocaleString:{defaultValue:null,description:"Returns a string representation of an array. The elements are converted to string using their toLocalString methods.",name:"toLocaleString",required:!1,type:{name:"() => string"}},pop:{defaultValue:null,description:"Removes the last element from an array and returns it.",name:"pop",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }"}},push:{defaultValue:null,description:"Appends new elements to an array, and returns the new length of the array.\n@param items New elements of the Array.",name:"push",required:!0,type:{name:"(...items: { provider: IProvider; value: unknown; }[]) => number"}},concat:{defaultValue:null,description:"Combines two or more arrays.\nCombines two or more arrays.\n@param items Additional items to add to the end of array1.\n@param items Additional items to add to the end of array1.",name:"concat",required:!0,type:{name:"{ (...items: ConcatArray<{ provider: IProvider; value: unknown; }>[]): { provider: IProvider; value: unknown; }[]; (...items: ({ provider: IProvider; value: unknown; } | ConcatArray<{ provider: IProvider; value: unknown; }>)[]): { ...; }[]; }"}},join:{defaultValue:null,description:"Adds all the elements of an array separated by the specified separator string.\n@param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.",name:"join",required:!0,type:{name:"(separator?: string) => string"}},reverse:{defaultValue:null,description:"Reverses the elements in an Array.",name:"reverse",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }[]"}},shift:{defaultValue:null,description:"Removes the first element from an array and returns it.",name:"shift",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }"}},slice:{defaultValue:null,description:"Returns a section of an array.\n@param start The beginning of the specified portion of the array.\n@param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.",name:"slice",required:!0,type:{name:"(start?: number, end?: number) => { provider: IProvider; value: unknown; }[]"}},sort:{defaultValue:null,description:"Sorts an array.\n@param compareFn Function used to determine the order of the elements. It is expected to return\ra negative value if first argument is less than second argument, zero if they're equal and a positive\rvalue otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\r```ts\r[11,2,22,1].sort((a, b) => a - b)\r```",name:"sort",required:!0,type:{name:"(compareFn?: (a: { provider: IProvider; value: unknown; }, b: { provider: IProvider; value: unknown; }) => number) => IAllProvidedValues"}},splice:{defaultValue:null,description:"Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\nRemoves elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param items Elements to insert into the array in place of the deleted elements.",name:"splice",required:!0,type:{name:"{ (start: number, deleteCount?: number): { provider: IProvider; value: unknown; }[]; (start: number, deleteCount: number, ...items: { provider: IProvider; value: unknown; }[]): { provider: IProvider; value: unknown; }[]; }"}},unshift:{defaultValue:null,description:"Inserts new elements at the start of an array.\n@param items Elements to insert at the start of the Array.",name:"unshift",required:!0,type:{name:"(...items: { provider: IProvider; value: unknown; }[]) => number"}},indexOf:{defaultValue:null,description:"Returns the index of the first occurrence of a value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.",name:"indexOf",required:!0,type:{name:"(searchElement: { provider: IProvider; value: unknown; }, fromIndex?: number) => number"}},lastIndexOf:{defaultValue:null,description:"Returns the index of the last occurrence of a specified value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.",name:"lastIndexOf",required:!0,type:{name:"(searchElement: { provider: IProvider; value: unknown; }, fromIndex?: number) => number"}},every:{defaultValue:null,description:"Determines whether all the members of an array satisfy the specified test.\n@param callbackfn A function that accepts up to three arguments. The every method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value false, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"every",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => unknown, thisArg?: any) => boolean"}},some:{defaultValue:null,description:"Determines whether the specified callback function returns true for any element of an array.\n@param callbackfn A function that accepts up to three arguments. The some method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value true, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"some",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => unknown, thisArg?: any) => boolean"}},forEach:{defaultValue:null,description:"Performs the specified action for each element in an array.\n@param callbackfn A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"forEach",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => void, thisArg?: any) => void"}},map:{defaultValue:null,description:"Calls a defined callback function on each element of an array, and returns an array that contains the results.\n@param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"map",required:!0,type:{name:"<U>(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => U, thisArg?: any) => U[]"}},filter:{defaultValue:null,description:"Returns the elements of an array that meet the condition specified in a callback function.\nReturns the elements of an array that meet the condition specified in a callback function.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"filter",required:!0,type:{name:"{ <S extends { provider: IProvider; value: unknown; }>(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => value is S, thisArg?: any): S[]; (callbackfn: (value: { ...; }, index: number, array: { ...; }[]) => unknown, thisArg?: any): { ......"}},reduce:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduce",required:!0,type:{name:"{ (callbackfn: (previousValue: { provider: IProvider; value: unknown; }, currentValue: { provider: IProvider; value: unknown; }, currentIndex: number, array: { provider: IProvider; value: unknown; }[]) => { ...; }): { ...; }; (callbackfn: (previousValue: { ...; }, currentValue: { ...; }, currentIndex: number, array:..."}},reduceRight:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduceRight",required:!0,type:{name:"{ (callbackfn: (previousValue: { provider: IProvider; value: unknown; }, currentValue: { provider: IProvider; value: unknown; }, currentIndex: number, array: { provider: IProvider; value: unknown; }[]) => { ...; }): { ...; }; (callbackfn: (previousValue: { ...; }, currentValue: { ...; }, currentIndex: number, array:..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lifeCycle.ts#DIPluginAutoBindLifeCycle"]={docgenInfo:lifeCycle_DIPluginAutoBindLifeCycle.__docgenInfo,name:"DIPluginAutoBindLifeCycle",path:"src/lifeCycle.ts#DIPluginAutoBindLifeCycle"})}catch(__react_docgen_typescript_loader_error){}var ContainerHookPlugin=function(allProvidedValues){useSyncInit((function(){var result=[];return allProvidedValues.forEach((function(_a){var value=_a.value;utils_isObject(value)&&value.useDIContainerHook&&result.push(value.useDIContainerHook.bind(value))})),result})).forEach((function(plugin){plugin()}))};try{ContainerHookPlugin.displayName="ContainerHookPlugin",ContainerHookPlugin.__docgenInfo={description:"",displayName:"ContainerHookPlugin",props:{length:{defaultValue:null,description:"Gets or sets the length of the array. This is a number one higher than the highest element defined in an array.",name:"length",required:!0,type:{name:"number"}},toString:{defaultValue:null,description:"Returns a string representation of an array.",name:"toString",required:!1,type:{name:"() => string"}},toLocaleString:{defaultValue:null,description:"Returns a string representation of an array. The elements are converted to string using their toLocalString methods.",name:"toLocaleString",required:!1,type:{name:"() => string"}},pop:{defaultValue:null,description:"Removes the last element from an array and returns it.",name:"pop",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }"}},push:{defaultValue:null,description:"Appends new elements to an array, and returns the new length of the array.\n@param items New elements of the Array.",name:"push",required:!0,type:{name:"(...items: { provider: IProvider; value: unknown; }[]) => number"}},concat:{defaultValue:null,description:"Combines two or more arrays.\nCombines two or more arrays.\n@param items Additional items to add to the end of array1.\n@param items Additional items to add to the end of array1.",name:"concat",required:!0,type:{name:"{ (...items: ConcatArray<{ provider: IProvider; value: unknown; }>[]): { provider: IProvider; value: unknown; }[]; (...items: ({ provider: IProvider; value: unknown; } | ConcatArray<{ provider: IProvider; value: unknown; }>)[]): { ...; }[]; }"}},join:{defaultValue:null,description:"Adds all the elements of an array separated by the specified separator string.\n@param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.",name:"join",required:!0,type:{name:"(separator?: string) => string"}},reverse:{defaultValue:null,description:"Reverses the elements in an Array.",name:"reverse",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }[]"}},shift:{defaultValue:null,description:"Removes the first element from an array and returns it.",name:"shift",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }"}},slice:{defaultValue:null,description:"Returns a section of an array.\n@param start The beginning of the specified portion of the array.\n@param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.",name:"slice",required:!0,type:{name:"(start?: number, end?: number) => { provider: IProvider; value: unknown; }[]"}},sort:{defaultValue:null,description:"Sorts an array.\n@param compareFn Function used to determine the order of the elements. It is expected to return\ra negative value if first argument is less than second argument, zero if they're equal and a positive\rvalue otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\r```ts\r[11,2,22,1].sort((a, b) => a - b)\r```",name:"sort",required:!0,type:{name:"(compareFn?: (a: { provider: IProvider; value: unknown; }, b: { provider: IProvider; value: unknown; }) => number) => IAllProvidedValues"}},splice:{defaultValue:null,description:"Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\nRemoves elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param items Elements to insert into the array in place of the deleted elements.",name:"splice",required:!0,type:{name:"{ (start: number, deleteCount?: number): { provider: IProvider; value: unknown; }[]; (start: number, deleteCount: number, ...items: { provider: IProvider; value: unknown; }[]): { provider: IProvider; value: unknown; }[]; }"}},unshift:{defaultValue:null,description:"Inserts new elements at the start of an array.\n@param items Elements to insert at the start of the Array.",name:"unshift",required:!0,type:{name:"(...items: { provider: IProvider; value: unknown; }[]) => number"}},indexOf:{defaultValue:null,description:"Returns the index of the first occurrence of a value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.",name:"indexOf",required:!0,type:{name:"(searchElement: { provider: IProvider; value: unknown; }, fromIndex?: number) => number"}},lastIndexOf:{defaultValue:null,description:"Returns the index of the last occurrence of a specified value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.",name:"lastIndexOf",required:!0,type:{name:"(searchElement: { provider: IProvider; value: unknown; }, fromIndex?: number) => number"}},every:{defaultValue:null,description:"Determines whether all the members of an array satisfy the specified test.\n@param callbackfn A function that accepts up to three arguments. The every method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value false, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"every",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => unknown, thisArg?: any) => boolean"}},some:{defaultValue:null,description:"Determines whether the specified callback function returns true for any element of an array.\n@param callbackfn A function that accepts up to three arguments. The some method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value true, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"some",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => unknown, thisArg?: any) => boolean"}},forEach:{defaultValue:null,description:"Performs the specified action for each element in an array.\n@param callbackfn A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"forEach",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => void, thisArg?: any) => void"}},map:{defaultValue:null,description:"Calls a defined callback function on each element of an array, and returns an array that contains the results.\n@param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"map",required:!0,type:{name:"<U>(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => U, thisArg?: any) => U[]"}},filter:{defaultValue:null,description:"Returns the elements of an array that meet the condition specified in a callback function.\nReturns the elements of an array that meet the condition specified in a callback function.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"filter",required:!0,type:{name:"{ <S extends { provider: IProvider; value: unknown; }>(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => value is S, thisArg?: any): S[]; (callbackfn: (value: { ...; }, index: number, array: { ...; }[]) => unknown, thisArg?: any): { ......"}},reduce:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduce",required:!0,type:{name:"{ (callbackfn: (previousValue: { provider: IProvider; value: unknown; }, currentValue: { provider: IProvider; value: unknown; }, currentIndex: number, array: { provider: IProvider; value: unknown; }[]) => { ...; }): { ...; }; (callbackfn: (previousValue: { ...; }, currentValue: { ...; }, currentIndex: number, array:..."}},reduceRight:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduceRight",required:!0,type:{name:"{ (callbackfn: (previousValue: { provider: IProvider; value: unknown; }, currentValue: { provider: IProvider; value: unknown; }, currentIndex: number, array: { provider: IProvider; value: unknown; }[]) => { ...; }): { ...; }; (callbackfn: (previousValue: { ...; }, currentValue: { ...; }, currentIndex: number, array:..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/container-hook-plugin.tsx#ContainerHookPlugin"]={docgenInfo:ContainerHookPlugin.__docgenInfo,name:"ContainerHookPlugin",path:"src/di/container-hook-plugin.tsx#ContainerHookPlugin"})}catch(__react_docgen_typescript_loader_error){}var PluginExecutor=function(_a){var allProvidedValues=_a.allProvidedValues,plugins=_a.plugins,children=_a.children;return plugins.forEach((function(plugin){plugin(allProvidedValues)})),react_default.a.createElement(react_default.a.Fragment,null,children)},provider_assign=function(){return(provider_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function getDIContainer(opts){void 0===opts&&(opts={});var _a=opts.providers,providers=void 0===_a?[]:_a,_b=opts.autoBindInjectable,autoBindInjectable=void 0!==_b&&_b,_c=opts.plugins,plugins=void 0===_c?[]:_c;plugins.unshift(lifeCycle_DIPluginAutoBindLifeCycle,ContainerHookPlugin);return function(_a){var children=_a.children,upperContainer=react_default.a.useContext(di_context);usePrevious_useAssertValueNotChange(upperContainer);var _b=useSyncInit(function(upperContainer){return function(){var injector=new inversify.Container({defaultScope:"Singleton",skipBaseClassChecks:!0,autoBindInjectable:autoBindInjectable});upperContainer&&(injector.parent=upperContainer),providers.forEach((function(provider){if(types_isServiceCtor(provider))injector.bind(provider).toSelf();else if(types_isClassProvider(provider))injector.bind(types_getActualToken(provider.provide)).to(provider.useClass);else if(types_isExistingProvider(provider))injector.bind(types_getActualToken(provider.provide)).toService(types_getActualToken(provider.useExisting));else if(types_isValueProvider(provider))injector.bind(types_getActualToken(provider.provide)).toConstantValue(provider.useValue);else{if(!types_isFactoryProvider(provider))throw console.error("Invalid provider definition:",provider),new Error("Invalid provider definition: "+JSON.stringify(provider));injector.bind(types_getActualToken(provider.provide)).toDynamicValue((function(context){var result,container=context.container,deps=(result=[],Array.isArray(provider.deps)&&provider.deps.forEach((function(depToken){result.push(container.get(types_getActualToken(depToken)))})),result);return provider.useFactory.apply(provider,deps)}))}}));var allProvidedValues=providers.map((function(provider){return{value:types_isServiceCtor(provider)?injector.get(provider):injector.get(types_getActualToken(provider.provide)),provider:provider}}));return{injector:injector,allProvidedValues:allProvidedValues}}}(upperContainer)),injector=_b.injector,allProvidedValues=_b.allProvidedValues;return react_default.a.createElement(di_context.Provider,{value:injector},react_default.a.createElement(PluginExecutor,{allProvidedValues:allProvidedValues,plugins:plugins},children))}}function withDIContainer(optsOrProviders){var DIContainer=getDIContainer(null===optsOrProviders||"object"!=typeof optsOrProviders?{}:Array.isArray(optsOrProviders)?{providers:optsOrProviders}:optsOrProviders);return function(Wrapped){return function(props){return react_default.a.createElement(DIContainer,null,react_default.a.createElement(Wrapped,provider_assign({},props)))}}}try{getDIContainer.displayName="getDIContainer",getDIContainer.__docgenInfo={description:"",displayName:"getDIContainer",props:{providers:{defaultValue:null,description:"",name:"providers",required:!1,type:{name:"IProvider[]"}},autoBindInjectable:{defaultValue:null,description:"",name:"autoBindInjectable",required:!1,type:{name:"boolean"}},plugins:{defaultValue:null,description:"",name:"plugins",required:!1,type:{name:"IContainerLevelPlugin[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/provider.tsx#getDIContainer"]={docgenInfo:getDIContainer.__docgenInfo,name:"getDIContainer",path:"src/di/provider.tsx#getDIContainer"})}catch(__react_docgen_typescript_loader_error){}try{withDIContainer.displayName="withDIContainer",withDIContainer.__docgenInfo={description:"",displayName:"withDIContainer",props:{length:{defaultValue:null,description:"Gets or sets the length of the array. This is a number one higher than the highest element defined in an array.",name:"length",required:!0,type:{name:"number"}},toString:{defaultValue:null,description:"Returns a string representation of an array.",name:"toString",required:!1,type:{name:"() => string"}},toLocaleString:{defaultValue:null,description:"Returns a string representation of an array. The elements are converted to string using their toLocalString methods.",name:"toLocaleString",required:!1,type:{name:"() => string"}},pop:{defaultValue:null,description:"Removes the last element from an array and returns it.",name:"pop",required:!0,type:{name:"() => IProvider"}},push:{defaultValue:null,description:"Appends new elements to an array, and returns the new length of the array.\n@param items New elements of the Array.",name:"push",required:!0,type:{name:"(...items: IProvider[]) => number"}},concat:{defaultValue:null,description:"Combines two or more arrays.\nCombines two or more arrays.\n@param items Additional items to add to the end of array1.\n@param items Additional items to add to the end of array1.",name:"concat",required:!0,type:{name:"{ (...items: ConcatArray<IProvider>[]): IProvider[]; (...items: (Newable<object> | IClassProvider | IExistingProvider | IValueProvider | IFactoryProvider | ConcatArray<...>)[]): IProvider[]; }"}},join:{defaultValue:null,description:"Adds all the elements of an array separated by the specified separator string.\n@param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.",name:"join",required:!0,type:{name:"(separator?: string) => string"}},reverse:{defaultValue:null,description:"Reverses the elements in an Array.",name:"reverse",required:!0,type:{name:"() => IProvider[]"}},shift:{defaultValue:null,description:"Removes the first element from an array and returns it.",name:"shift",required:!0,type:{name:"() => IProvider"}},slice:{defaultValue:null,description:"Returns a section of an array.\n@param start The beginning of the specified portion of the array.\n@param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.",name:"slice",required:!0,type:{name:"(start?: number, end?: number) => IProvider[]"}},sort:{defaultValue:null,description:"Sorts an array.\n@param compareFn Function used to determine the order of the elements. It is expected to return\ra negative value if first argument is less than second argument, zero if they're equal and a positive\rvalue otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\r```ts\r[11,2,22,1].sort((a, b) => a - b)\r```",name:"sort",required:!0,type:{name:"(compareFn?: (a: IProvider, b: IProvider) => number) => IProvider[]"}},splice:{defaultValue:null,description:"Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\nRemoves elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param items Elements to insert into the array in place of the deleted elements.",name:"splice",required:!0,type:{name:"{ (start: number, deleteCount?: number): IProvider[]; (start: number, deleteCount: number, ...items: IProvider[]): IProvider[]; }"}},unshift:{defaultValue:null,description:"Inserts new elements at the start of an array.\n@param items Elements to insert at the start of the Array.",name:"unshift",required:!0,type:{name:"(...items: IProvider[]) => number"}},indexOf:{defaultValue:null,description:"Returns the index of the first occurrence of a value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.",name:"indexOf",required:!0,type:{name:"(searchElement: IProvider, fromIndex?: number) => number"}},lastIndexOf:{defaultValue:null,description:"Returns the index of the last occurrence of a specified value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.",name:"lastIndexOf",required:!0,type:{name:"(searchElement: IProvider, fromIndex?: number) => number"}},every:{defaultValue:null,description:"Determines whether all the members of an array satisfy the specified test.\n@param callbackfn A function that accepts up to three arguments. The every method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value false, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"every",required:!0,type:{name:"(callbackfn: (value: IProvider, index: number, array: IProvider[]) => unknown, thisArg?: any) => boolean"}},some:{defaultValue:null,description:"Determines whether the specified callback function returns true for any element of an array.\n@param callbackfn A function that accepts up to three arguments. The some method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value true, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"some",required:!0,type:{name:"(callbackfn: (value: IProvider, index: number, array: IProvider[]) => unknown, thisArg?: any) => boolean"}},forEach:{defaultValue:null,description:"Performs the specified action for each element in an array.\n@param callbackfn A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"forEach",required:!0,type:{name:"(callbackfn: (value: IProvider, index: number, array: IProvider[]) => void, thisArg?: any) => void"}},map:{defaultValue:null,description:"Calls a defined callback function on each element of an array, and returns an array that contains the results.\n@param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"map",required:!0,type:{name:"<U>(callbackfn: (value: IProvider, index: number, array: IProvider[]) => U, thisArg?: any) => U[]"}},filter:{defaultValue:null,description:"Returns the elements of an array that meet the condition specified in a callback function.\nReturns the elements of an array that meet the condition specified in a callback function.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"filter",required:!0,type:{name:"{ <S extends IProvider>(callbackfn: (value: IProvider, index: number, array: IProvider[]) => value is S, thisArg?: any): S[]; (callbackfn: (value: IProvider, index: number, array: IProvider[]) => unknown, thisArg?: any): IProvider[]; }"}},reduce:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduce",required:!0,type:{name:"{ (callbackfn: (previousValue: IProvider, currentValue: IProvider, currentIndex: number, array: IProvider[]) => IProvider): IProvider; (callbackfn: (previousValue: IProvider, currentValue: IProvider, currentIndex: number, array: IProvider[]) => IProvider, initialValue: IProvider): IProvider; <U>(callbackfn: (previou..."}},reduceRight:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduceRight",required:!0,type:{name:"{ (callbackfn: (previousValue: IProvider, currentValue: IProvider, currentIndex: number, array: IProvider[]) => IProvider): IProvider; (callbackfn: (previousValue: IProvider, currentValue: IProvider, currentIndex: number, array: IProvider[]) => IProvider, initialValue: IProvider): IProvider; <U>(callbackfn: (previou..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/provider.tsx#withDIContainer"]={docgenInfo:withDIContainer.__docgenInfo,name:"withDIContainer",path:"src/di/provider.tsx#withDIContainer"})}catch(__react_docgen_typescript_loader_error){}try{isToken.displayName="isToken",isToken.__docgenInfo={description:"",displayName:"isToken",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/index.ts#isToken"]={docgenInfo:isToken.__docgenInfo,name:"isToken",path:"src/di/index.ts#isToken"})}catch(__react_docgen_typescript_loader_error){}try{getActualToken.displayName="getActualToken",getActualToken.__docgenInfo={description:"",displayName:"getActualToken",props:{toString:{defaultValue:null,description:"Returns a string representation of an object.\nReturns a string representation of an object.\nReturns a string representation of a function.",name:"toString",required:!1,type:{name:"(() => string) | ((() => string) & (() => string)) | (() => string)"}},valueOf:{defaultValue:null,description:"Returns the primitive value of the specified object.\nReturns the primitive value of the specified object.",name:"valueOf",required:!1,type:{name:"(() => symbol) | (() => Object)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/index.ts#getActualToken"]={docgenInfo:getActualToken.__docgenInfo,name:"getActualToken",path:"src/di/index.ts#getActualToken"})}catch(__react_docgen_typescript_loader_error){}try{isServiceCtor.displayName="isServiceCtor",isServiceCtor.__docgenInfo={description:"",displayName:"isServiceCtor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/index.ts#isServiceCtor"]={docgenInfo:isServiceCtor.__docgenInfo,name:"isServiceCtor",path:"src/di/index.ts#isServiceCtor"})}catch(__react_docgen_typescript_loader_error){}try{isClassProvider.displayName="isClassProvider",isClassProvider.__docgenInfo={description:"",displayName:"isClassProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/index.ts#isClassProvider"]={docgenInfo:isClassProvider.__docgenInfo,name:"isClassProvider",path:"src/di/index.ts#isClassProvider"})}catch(__react_docgen_typescript_loader_error){}try{isExistingProvider.displayName="isExistingProvider",isExistingProvider.__docgenInfo={description:"",displayName:"isExistingProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/index.ts#isExistingProvider"]={docgenInfo:isExistingProvider.__docgenInfo,name:"isExistingProvider",path:"src/di/index.ts#isExistingProvider"})}catch(__react_docgen_typescript_loader_error){}try{isValueProvider.displayName="isValueProvider",isValueProvider.__docgenInfo={description:"",displayName:"isValueProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/index.ts#isValueProvider"]={docgenInfo:isValueProvider.__docgenInfo,name:"isValueProvider",path:"src/di/index.ts#isValueProvider"})}catch(__react_docgen_typescript_loader_error){}try{isFactoryProvider.displayName="isFactoryProvider",isFactoryProvider.__docgenInfo={description:"",displayName:"isFactoryProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/di/index.ts#isFactoryProvider"]={docgenInfo:isFactoryProvider.__docgenInfo,name:"isFactoryProvider",path:"src/di/index.ts#isFactoryProvider"})}catch(__react_docgen_typescript_loader_error){}var defer=__webpack_require__(692),identity=__webpack_require__(317),throwError=__webpack_require__(151),timer=__webpack_require__(694),of=__webpack_require__(154),timeout=__webpack_require__(701),retryWhen=__webpack_require__(693),scan=__webpack_require__(324),mergeMap=__webpack_require__(318),map=__webpack_require__(152),startWith=__webpack_require__(702),catchError=__webpack_require__(695),shareReplay=__webpack_require__(700),switchMap=__webpack_require__(696);function asyncCaller_asyncCaller(opts){var query$=opts.query$,calleeFn=opts.calleeFn,timeoutParam=opts.timeout,decideRetry=opts.decideRetry;return query$.pipe(Object(map.a)((function(query){return Object(defer.a)((function(){return calleeFn(query)})).pipe("number"==typeof timeoutParam?Object(timeout.a)(timeoutParam):identity.a,Object(retryWhen.a)((function(error$){return error$.pipe(Object(scan.a)((function(_a,error){return{context:_a.context,error:error}}),{context:{},error:{}}),Object(mergeMap.a)((function(_a){var context=_a.context,error=_a.error;if("function"!=typeof decideRetry)return Object(throwError.a)(error);var decision=decideRetry(error,context);return decision?"retry"===decision.type?Object(timer.a)(decision.delay):"giveUp"===decision.type?Object(throwError.a)(decision.reason):Object(throwError.a)(error):Object(throwError.a)(error)})))})),Object(map.a)((function(response){return{type:"success",query:query,response:response}})),Object(startWith.a)({type:"loading",query:query}),Object(catchError.a)((function(error){return Object(of.a)({type:"error",query:query,error:error})})),Object(shareReplay.a)({bufferSize:1,refCount:!1}))})),Object(shareReplay.a)({bufferSize:1,refCount:!1}),Object(switchMap.a)((function(fetch$){return fetch$})))}try{asyncCaller_asyncCaller.displayName="asyncCaller",asyncCaller_asyncCaller.__docgenInfo={description:"异步调用管理。\n相比直接调用异步过程，通过asyncCaller来调用异步过程能获得以下好处：\n1. 帮你维护pending、error、success状态\n2. query$更新时，自动调用异步过程，并更新流的状态\n3. 超时检测，用户定义超时阈值，超时视为出错\n4. 出错重试，用户可自定义是否要重试（不重试则进入error状态）、等待多久重试。\n  可配合超时检测一起用，在超时以后重试若干次。\n\n你可以将它类比于Redux：\n  使用者发射新query（query$.next(query)）相当于dispatch(action)；\n  返回流的状态更新，可以理解为state被effect->action->reducer更新。\n\n使用Redux同样可以实现pending状态管理、出错重试等功能，\n但是这种Redux逻辑的可复用很差。如果有10个API需要这种管理，\n你很难在复用异步管理逻辑的同时保证typescript类型安全\n（因为你需要通过字符串来拼接出state的key）。",displayName:"asyncCaller",props:{query$:{defaultValue:null,description:"",name:"query$",required:!0,type:{name:"Observable<QueryType>"}},calleeFn:{defaultValue:null,description:"",name:"calleeFn",required:!0,type:{name:"(query: QueryType) => Promise<ResponseType>"}},timeout:{defaultValue:null,description:"",name:"timeout",required:!1,type:{name:"number"}},decideRetry:{defaultValue:null,description:"",name:"decideRetry",required:!1,type:{name:"(error: any, context: any) => IRetryDecision"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/asyncCaller/asyncCaller.ts#asyncCaller"]={docgenInfo:asyncCaller_asyncCaller.__docgenInfo,name:"asyncCaller",path:"src/asyncCaller/asyncCaller.ts#asyncCaller"})}catch(__react_docgen_typescript_loader_error){}var using=__webpack_require__(698),tap=__webpack_require__(697),publish=__webpack_require__(703),refCount=__webpack_require__(319);function asyncCallerWithCache_asyncCallerWithCache(opts){var query$=opts.query$,invalidateCache$=opts.invalidateCache$,calleeFn=opts.calleeFn,getCacheKey=opts.getCacheKey,timeoutParam=opts.timeout,decideRetry=opts.decideRetry,cache=new Map,queryResult$=query$.pipe(Object(switchMap.a)((function(query){return function(query){return Object(defer.a)((function(){var cacheKey=getCacheKey(query);if(!cache.has(cacheKey)){var trigger$=new Subject.a,result$_1=asyncCaller_asyncCaller({query$:trigger$.pipe(Object(startWith.a)(query)),calleeFn:calleeFn,timeout:timeoutParam,decideRetry:decideRetry});cache.set(cacheKey,{trigger$:trigger$,result$:result$_1})}return cache.get(cacheKey).result$}))}(query)}))),refreshCache$=invalidateCache$.pipe(Object(tap.a)((function(query){!function(query){var cacheKey=getCacheKey(query);cache.has(cacheKey)&&cache.get(cacheKey).trigger$.next(query)}(query)})),Object(publish.a)(),Object(refCount.a)());return Object(using.a)((function(){return refreshCache$.subscribe()}),(function(){return queryResult$}))}try{asyncCallerWithCache_asyncCallerWithCache.displayName="asyncCallerWithCache",asyncCallerWithCache_asyncCallerWithCache.__docgenInfo={description:"异步调用管理（带缓存）。\n相比直接调用异步过程，除了asyncCaller具有的优势以外，它还具有以下能力：\n1. query具有与之前相同的cacheKey时，使用缓存结果\n2. 通过invalidateCache$可以控制缓存失效，从而重新调用异步过程",displayName:"asyncCallerWithCache",props:{getCacheKey:{defaultValue:null,description:"",name:"getCacheKey",required:!0,type:{name:"(query: QueryType) => string"}},invalidateCache$:{defaultValue:null,description:"",name:"invalidateCache$",required:!0,type:{name:"Observable<QueryType>"}},query$:{defaultValue:null,description:"",name:"query$",required:!0,type:{name:"Observable<QueryType>"}},calleeFn:{defaultValue:null,description:"",name:"calleeFn",required:!0,type:{name:"(query: QueryType) => Promise<ResponseType>"}},timeout:{defaultValue:null,description:"",name:"timeout",required:!1,type:{name:"number"}},decideRetry:{defaultValue:null,description:"",name:"decideRetry",required:!1,type:{name:"(error: any, context: any) => IRetryDecision"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/asyncCaller/asyncCallerWithCache.ts#asyncCallerWithCache"]={docgenInfo:asyncCallerWithCache_asyncCallerWithCache.__docgenInfo,name:"asyncCallerWithCache",path:"src/asyncCaller/asyncCallerWithCache.ts#asyncCallerWithCache"})}catch(__react_docgen_typescript_loader_error){}try{asyncCaller.displayName="asyncCaller",asyncCaller.__docgenInfo={description:"异步调用管理。\n相比直接调用异步过程，通过asyncCaller来调用异步过程能获得以下好处：\n1. 帮你维护pending、error、success状态\n2. query$更新时，自动调用异步过程，并更新流的状态\n3. 超时检测，用户定义超时阈值，超时视为出错\n4. 出错重试，用户可自定义是否要重试（不重试则进入error状态）、等待多久重试。\n  可配合超时检测一起用，在超时以后重试若干次。\n\n你可以将它类比于Redux：\n  使用者发射新query（query$.next(query)）相当于dispatch(action)；\n  返回流的状态更新，可以理解为state被effect->action->reducer更新。\n\n使用Redux同样可以实现pending状态管理、出错重试等功能，\n但是这种Redux逻辑的可复用很差。如果有10个API需要这种管理，\n你很难在复用异步管理逻辑的同时保证typescript类型安全\n（因为你需要通过字符串来拼接出state的key）。",displayName:"asyncCaller",props:{query$:{defaultValue:null,description:"",name:"query$",required:!0,type:{name:"Observable<QueryType>"}},calleeFn:{defaultValue:null,description:"",name:"calleeFn",required:!0,type:{name:"(query: QueryType) => Promise<ResponseType>"}},timeout:{defaultValue:null,description:"",name:"timeout",required:!1,type:{name:"number"}},decideRetry:{defaultValue:null,description:"",name:"decideRetry",required:!1,type:{name:"(error: any, context: any) => IRetryDecision"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/asyncCaller/index.ts#asyncCaller"]={docgenInfo:asyncCaller.__docgenInfo,name:"asyncCaller",path:"src/asyncCaller/index.ts#asyncCaller"})}catch(__react_docgen_typescript_loader_error){}try{asyncCallerWithCache.displayName="asyncCallerWithCache",asyncCallerWithCache.__docgenInfo={description:"异步调用管理（带缓存）。\n相比直接调用异步过程，除了asyncCaller具有的优势以外，它还具有以下能力：\n1. query具有与之前相同的cacheKey时，使用缓存结果\n2. 通过invalidateCache$可以控制缓存失效，从而重新调用异步过程",displayName:"asyncCallerWithCache",props:{getCacheKey:{defaultValue:null,description:"",name:"getCacheKey",required:!0,type:{name:"(query: QueryType) => string"}},invalidateCache$:{defaultValue:null,description:"",name:"invalidateCache$",required:!0,type:{name:"Observable<QueryType>"}},query$:{defaultValue:null,description:"",name:"query$",required:!0,type:{name:"Observable<QueryType>"}},calleeFn:{defaultValue:null,description:"",name:"calleeFn",required:!0,type:{name:"(query: QueryType) => Promise<ResponseType>"}},timeout:{defaultValue:null,description:"",name:"timeout",required:!1,type:{name:"number"}},decideRetry:{defaultValue:null,description:"",name:"decideRetry",required:!1,type:{name:"(error: any, context: any) => IRetryDecision"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/asyncCaller/index.ts#asyncCallerWithCache"]={docgenInfo:asyncCallerWithCache.__docgenInfo,name:"asyncCallerWithCache",path:"src/asyncCaller/index.ts#asyncCallerWithCache"})}catch(__react_docgen_typescript_loader_error){}var extendStatics,BehaviorSubject=__webpack_require__(699),sharedState_SharedState=function(){function SharedState(initialValue){var _this=this;this.initialValue=initialValue,this._value$=new BehaviorSubject.a(initialValue),this._value=initialValue,this.value$=this._value$.pipe(Object(tap.a)((function(v){_this._value=v})))}return SharedState.prototype.useValue=function(){return useObservable_useObservable(this.value$,this._value)},SharedState.prototype.setValue=function(nextValue){this._value$.next(nextValue)},SharedState.prototype.setValueWithFn=function(updater){if("function"!=typeof updater)throw new Error("updater should be a function. but got "+typeof updater);this._value$.next(updater(this._value))},SharedState}(),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});function inversify_patch_inject(serviceIdentifier){var actualToken=serviceIdentifier instanceof inversify_patch_LazyTokenRef?serviceIdentifier:types_getActualToken(serviceIdentifier);return Object(inversify.inject)(actualToken)}function inversify_patch_forwardRef(lazyToken){return new inversify_patch_LazyTokenRef(lazyToken)}var inversify_patch_LazyTokenRef=function(_super){function LazyTokenRef(cb){return _super.call(this,(function(){return types_getActualToken(cb())}))||this}return __extends(LazyTokenRef,_super),LazyTokenRef}(inversify.LazyServiceIdentifer);try{inversify_patch_inject.displayName="inject",inversify_patch_inject.__docgenInfo={description:"",displayName:"inject",props:{toString:{defaultValue:null,description:"Returns a string representation of an object.\nReturns a string representation of an object.\nReturns a string representation of a function.",name:"toString",required:!1,type:{name:"(() => string) | ((() => string) & (() => string)) | (() => string)"}},valueOf:{defaultValue:null,description:"Returns the primitive value of the specified object.\nReturns the primitive value of the specified object.",name:"valueOf",required:!1,type:{name:"(() => symbol) | (() => Object)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/inversify.patch.ts#inject"]={docgenInfo:inversify_patch_inject.__docgenInfo,name:"inject",path:"src/inversify.patch.ts#inject"})}catch(__react_docgen_typescript_loader_error){}try{inversify_patch_forwardRef.displayName="forwardRef",inversify_patch_forwardRef.__docgenInfo={description:"",displayName:"forwardRef",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/inversify.patch.ts#forwardRef"]={docgenInfo:inversify_patch_forwardRef.__docgenInfo,name:"forwardRef",path:"src/inversify.patch.ts#forwardRef"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__.d(__webpack_exports__,"f",(function(){return useDIConsumer})),__webpack_require__.d(__webpack_exports__,"h",(function(){return withDIContainer})),__webpack_require__.d(__webpack_exports__,"a",(function(){return types_CustomToken})),__webpack_require__.d(__webpack_exports__,"b",(function(){return lifeCycle_LifeCycle})),__webpack_require__.d(__webpack_exports__,"c",(function(){return sharedState_SharedState})),__webpack_require__.d(__webpack_exports__,"g",(function(){return useObservable_useObservable})),__webpack_require__.d(__webpack_exports__,"e",(function(){return inversify.injectable})),__webpack_require__.d(__webpack_exports__,"d",(function(){return inversify_patch_inject}));try{isToken.displayName="isToken",isToken.__docgenInfo={description:"",displayName:"isToken",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#isToken"]={docgenInfo:isToken.__docgenInfo,name:"isToken",path:"src/index.ts#isToken"})}catch(__react_docgen_typescript_loader_error){}try{getActualToken.displayName="getActualToken",getActualToken.__docgenInfo={description:"",displayName:"getActualToken",props:{toString:{defaultValue:null,description:"Returns a string representation of an object.\nReturns a string representation of an object.\nReturns a string representation of a function.",name:"toString",required:!1,type:{name:"(() => string) | ((() => string) & (() => string)) | (() => string)"}},valueOf:{defaultValue:null,description:"Returns the primitive value of the specified object.\nReturns the primitive value of the specified object.",name:"valueOf",required:!1,type:{name:"(() => symbol) | (() => Object)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#getActualToken"]={docgenInfo:getActualToken.__docgenInfo,name:"getActualToken",path:"src/index.ts#getActualToken"})}catch(__react_docgen_typescript_loader_error){}try{isServiceCtor.displayName="isServiceCtor",isServiceCtor.__docgenInfo={description:"",displayName:"isServiceCtor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#isServiceCtor"]={docgenInfo:isServiceCtor.__docgenInfo,name:"isServiceCtor",path:"src/index.ts#isServiceCtor"})}catch(__react_docgen_typescript_loader_error){}try{isClassProvider.displayName="isClassProvider",isClassProvider.__docgenInfo={description:"",displayName:"isClassProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#isClassProvider"]={docgenInfo:isClassProvider.__docgenInfo,name:"isClassProvider",path:"src/index.ts#isClassProvider"})}catch(__react_docgen_typescript_loader_error){}try{isExistingProvider.displayName="isExistingProvider",isExistingProvider.__docgenInfo={description:"",displayName:"isExistingProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#isExistingProvider"]={docgenInfo:isExistingProvider.__docgenInfo,name:"isExistingProvider",path:"src/index.ts#isExistingProvider"})}catch(__react_docgen_typescript_loader_error){}try{isValueProvider.displayName="isValueProvider",isValueProvider.__docgenInfo={description:"",displayName:"isValueProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#isValueProvider"]={docgenInfo:isValueProvider.__docgenInfo,name:"isValueProvider",path:"src/index.ts#isValueProvider"})}catch(__react_docgen_typescript_loader_error){}try{isFactoryProvider.displayName="isFactoryProvider",isFactoryProvider.__docgenInfo={description:"",displayName:"isFactoryProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#isFactoryProvider"]={docgenInfo:isFactoryProvider.__docgenInfo,name:"isFactoryProvider",path:"src/index.ts#isFactoryProvider"})}catch(__react_docgen_typescript_loader_error){}try{DIPluginAutoBindLifeCycle.displayName="DIPluginAutoBindLifeCycle",DIPluginAutoBindLifeCycle.__docgenInfo={description:"",displayName:"DIPluginAutoBindLifeCycle",props:{length:{defaultValue:null,description:"Gets or sets the length of the array. This is a number one higher than the highest element defined in an array.",name:"length",required:!0,type:{name:"number"}},toString:{defaultValue:null,description:"Returns a string representation of an array.",name:"toString",required:!1,type:{name:"() => string"}},toLocaleString:{defaultValue:null,description:"Returns a string representation of an array. The elements are converted to string using their toLocalString methods.",name:"toLocaleString",required:!1,type:{name:"() => string"}},pop:{defaultValue:null,description:"Removes the last element from an array and returns it.",name:"pop",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }"}},push:{defaultValue:null,description:"Appends new elements to an array, and returns the new length of the array.\n@param items New elements of the Array.",name:"push",required:!0,type:{name:"(...items: { provider: IProvider; value: unknown; }[]) => number"}},concat:{defaultValue:null,description:"Combines two or more arrays.\nCombines two or more arrays.\n@param items Additional items to add to the end of array1.\n@param items Additional items to add to the end of array1.",name:"concat",required:!0,type:{name:"{ (...items: ConcatArray<{ provider: IProvider; value: unknown; }>[]): { provider: IProvider; value: unknown; }[]; (...items: ({ provider: IProvider; value: unknown; } | ConcatArray<{ provider: IProvider; value: unknown; }>)[]): { ...; }[]; }"}},join:{defaultValue:null,description:"Adds all the elements of an array separated by the specified separator string.\n@param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.",name:"join",required:!0,type:{name:"(separator?: string) => string"}},reverse:{defaultValue:null,description:"Reverses the elements in an Array.",name:"reverse",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }[]"}},shift:{defaultValue:null,description:"Removes the first element from an array and returns it.",name:"shift",required:!0,type:{name:"() => { provider: IProvider; value: unknown; }"}},slice:{defaultValue:null,description:"Returns a section of an array.\n@param start The beginning of the specified portion of the array.\n@param end The end of the specified portion of the array. This is exclusive of the element at the index 'end'.",name:"slice",required:!0,type:{name:"(start?: number, end?: number) => { provider: IProvider; value: unknown; }[]"}},sort:{defaultValue:null,description:"Sorts an array.\n@param compareFn Function used to determine the order of the elements. It is expected to return\ra negative value if first argument is less than second argument, zero if they're equal and a positive\rvalue otherwise. If omitted, the elements are sorted in ascending, ASCII character order.\r```ts\r[11,2,22,1].sort((a, b) => a - b)\r```",name:"sort",required:!0,type:{name:"(compareFn?: (a: { provider: IProvider; value: unknown; }, b: { provider: IProvider; value: unknown; }) => number) => IAllProvidedValues"}},splice:{defaultValue:null,description:"Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\nRemoves elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param items Elements to insert into the array in place of the deleted elements.",name:"splice",required:!0,type:{name:"{ (start: number, deleteCount?: number): { provider: IProvider; value: unknown; }[]; (start: number, deleteCount: number, ...items: { provider: IProvider; value: unknown; }[]): { provider: IProvider; value: unknown; }[]; }"}},unshift:{defaultValue:null,description:"Inserts new elements at the start of an array.\n@param items Elements to insert at the start of the Array.",name:"unshift",required:!0,type:{name:"(...items: { provider: IProvider; value: unknown; }[]) => number"}},indexOf:{defaultValue:null,description:"Returns the index of the first occurrence of a value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.",name:"indexOf",required:!0,type:{name:"(searchElement: { provider: IProvider; value: unknown; }, fromIndex?: number) => number"}},lastIndexOf:{defaultValue:null,description:"Returns the index of the last occurrence of a specified value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.",name:"lastIndexOf",required:!0,type:{name:"(searchElement: { provider: IProvider; value: unknown; }, fromIndex?: number) => number"}},every:{defaultValue:null,description:"Determines whether all the members of an array satisfy the specified test.\n@param callbackfn A function that accepts up to three arguments. The every method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value false, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"every",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => unknown, thisArg?: any) => boolean"}},some:{defaultValue:null,description:"Determines whether the specified callback function returns true for any element of an array.\n@param callbackfn A function that accepts up to three arguments. The some method calls\rthe callbackfn function for each element in the array until the callbackfn returns a value\rwhich is coercible to the Boolean value true, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function.\rIf thisArg is omitted, undefined is used as the this value.",name:"some",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => unknown, thisArg?: any) => boolean"}},forEach:{defaultValue:null,description:"Performs the specified action for each element in an array.\n@param callbackfn A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"forEach",required:!0,type:{name:"(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => void, thisArg?: any) => void"}},map:{defaultValue:null,description:"Calls a defined callback function on each element of an array, and returns an array that contains the results.\n@param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"map",required:!0,type:{name:"<U>(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => U, thisArg?: any) => U[]"}},filter:{defaultValue:null,description:"Returns the elements of an array that meet the condition specified in a callback function.\nReturns the elements of an array that meet the condition specified in a callback function.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"filter",required:!0,type:{name:"{ <S extends { provider: IProvider; value: unknown; }>(callbackfn: (value: { provider: IProvider; value: unknown; }, index: number, array: { provider: IProvider; value: unknown; }[]) => value is S, thisArg?: any): S[]; (callbackfn: (value: { ...; }, index: number, array: { ...; }[]) => unknown, thisArg?: any): { ......"}},reduce:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduce",required:!0,type:{name:"{ (callbackfn: (previousValue: { provider: IProvider; value: unknown; }, currentValue: { provider: IProvider; value: unknown; }, currentIndex: number, array: { provider: IProvider; value: unknown; }[]) => { ...; }): { ...; }; (callbackfn: (previousValue: { ...; }, currentValue: { ...; }, currentIndex: number, array:..."}},reduceRight:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduceRight",required:!0,type:{name:"{ (callbackfn: (previousValue: { provider: IProvider; value: unknown; }, currentValue: { provider: IProvider; value: unknown; }, currentIndex: number, array: { provider: IProvider; value: unknown; }[]) => { ...; }): { ...; }; (callbackfn: (previousValue: { ...; }, currentValue: { ...; }, currentIndex: number, array:..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#DIPluginAutoBindLifeCycle"]={docgenInfo:DIPluginAutoBindLifeCycle.__docgenInfo,name:"DIPluginAutoBindLifeCycle",path:"src/index.ts#DIPluginAutoBindLifeCycle"})}catch(__react_docgen_typescript_loader_error){}try{asyncCaller.displayName="asyncCaller",asyncCaller.__docgenInfo={description:"异步调用管理。\n相比直接调用异步过程，通过asyncCaller来调用异步过程能获得以下好处：\n1. 帮你维护pending、error、success状态\n2. query$更新时，自动调用异步过程，并更新流的状态\n3. 超时检测，用户定义超时阈值，超时视为出错\n4. 出错重试，用户可自定义是否要重试（不重试则进入error状态）、等待多久重试。\n  可配合超时检测一起用，在超时以后重试若干次。\n\n你可以将它类比于Redux：\n  使用者发射新query（query$.next(query)）相当于dispatch(action)；\n  返回流的状态更新，可以理解为state被effect->action->reducer更新。\n\n使用Redux同样可以实现pending状态管理、出错重试等功能，\n但是这种Redux逻辑的可复用很差。如果有10个API需要这种管理，\n你很难在复用异步管理逻辑的同时保证typescript类型安全\n（因为你需要通过字符串来拼接出state的key）。",displayName:"asyncCaller",props:{query$:{defaultValue:null,description:"",name:"query$",required:!0,type:{name:"Observable<QueryType>"}},calleeFn:{defaultValue:null,description:"",name:"calleeFn",required:!0,type:{name:"(query: QueryType) => Promise<ResponseType>"}},timeout:{defaultValue:null,description:"",name:"timeout",required:!1,type:{name:"number"}},decideRetry:{defaultValue:null,description:"",name:"decideRetry",required:!1,type:{name:"(error: any, context: any) => IRetryDecision"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#asyncCaller"]={docgenInfo:asyncCaller.__docgenInfo,name:"asyncCaller",path:"src/index.ts#asyncCaller"})}catch(__react_docgen_typescript_loader_error){}try{asyncCallerWithCache.displayName="asyncCallerWithCache",asyncCallerWithCache.__docgenInfo={description:"异步调用管理（带缓存）。\n相比直接调用异步过程，除了asyncCaller具有的优势以外，它还具有以下能力：\n1. query具有与之前相同的cacheKey时，使用缓存结果\n2. 通过invalidateCache$可以控制缓存失效，从而重新调用异步过程",displayName:"asyncCallerWithCache",props:{getCacheKey:{defaultValue:null,description:"",name:"getCacheKey",required:!0,type:{name:"(query: QueryType) => string"}},invalidateCache$:{defaultValue:null,description:"",name:"invalidateCache$",required:!0,type:{name:"Observable<QueryType>"}},query$:{defaultValue:null,description:"",name:"query$",required:!0,type:{name:"Observable<QueryType>"}},calleeFn:{defaultValue:null,description:"",name:"calleeFn",required:!0,type:{name:"(query: QueryType) => Promise<ResponseType>"}},timeout:{defaultValue:null,description:"",name:"timeout",required:!1,type:{name:"number"}},decideRetry:{defaultValue:null,description:"",name:"decideRetry",required:!1,type:{name:"(error: any, context: any) => IRetryDecision"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#asyncCallerWithCache"]={docgenInfo:asyncCallerWithCache.__docgenInfo,name:"asyncCallerWithCache",path:"src/index.ts#asyncCallerWithCache"})}catch(__react_docgen_typescript_loader_error){}try{isObject.displayName="isObject",isObject.__docgenInfo={description:"",displayName:"isObject",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#isObject"]={docgenInfo:isObject.__docgenInfo,name:"isObject",path:"src/index.ts#isObject"})}catch(__react_docgen_typescript_loader_error){}try{usePrevious.displayName="usePrevious",usePrevious.__docgenInfo={description:"",displayName:"usePrevious",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#usePrevious"]={docgenInfo:usePrevious.__docgenInfo,name:"usePrevious",path:"src/index.ts#usePrevious"})}catch(__react_docgen_typescript_loader_error){}try{useAssertValueNotChange.displayName="useAssertValueNotChange",useAssertValueNotChange.__docgenInfo={description:"",displayName:"useAssertValueNotChange",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#useAssertValueNotChange"]={docgenInfo:useAssertValueNotChange.__docgenInfo,name:"useAssertValueNotChange",path:"src/index.ts#useAssertValueNotChange"})}catch(__react_docgen_typescript_loader_error){}try{useObservable.displayName="useObservable",useObservable.__docgenInfo={description:"",displayName:"useObservable",props:{_isScalar:{defaultValue:null,description:"Internal implementation detail, do not use directly.",name:"_isScalar",required:!0,type:{name:"boolean"}},source:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"source",required:!0,type:{name:"Observable<any>"}},operator:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"operator",required:!0,type:{name:"Operator<any, ValueType>"}},lift:{defaultValue:null,description:"Creates a new Observable, with this Observable as the source, and the passed\noperator defined as the new observable's operator.\n@method lift\n@param operator the operator defining the operation to take on the observable\n@return a new observable with the Operator applied",name:"lift",required:!0,type:{name:"<R>(operator: Operator<ValueType, R>) => Observable<R>"}},subscribe:{defaultValue:null,description:"@deprecated Use an observer instead of a complete callback\n@deprecated Use an observer instead of an error callback\n@deprecated Use an observer instead of a complete callback",name:"subscribe",required:!0,type:{name:"{ (observer?: PartialObserver<ValueType>): Subscription; (next: null, error: null, complete: () => void): Subscription; (next: null, error: (error: any) => void, complete?: () => void): Subscription; (next: (value: ValueType) => void, error: null, complete: () => void): Subscription; (next?: (value: ValueType) => vo..."}},_trySubscribe:{defaultValue:null,description:"@deprecated This is an internal implementation detail, do not use.",name:"_trySubscribe",required:!0,type:{name:"(sink: Subscriber<ValueType>) => TeardownLogic"}},forEach:{defaultValue:null,description:"@method forEach\n@param next a handler for each value emitted by the observable\n@param promiseCtor a constructor function used to instantiate the Promise\n@return a promise that either resolves on observable completion or\nrejects with the handled error",name:"forEach",required:!0,type:{name:"(next: (value: ValueType) => void, promiseCtor?: PromiseConstructorLike) => Promise<void>"}},_subscribe:{defaultValue:null,description:"@internal This is an internal implementation detail, do not use.",name:"_subscribe",required:!0,type:{name:"(subscriber: Subscriber<any>) => TeardownLogic"}},pipe:{defaultValue:null,description:"",name:"pipe",required:!0,type:{name:"{ (): Observable<ValueType>; <A>(op1: OperatorFunction<ValueType, A>): Observable<A>; <A, B>(op1: OperatorFunction<ValueType, A>, op2: OperatorFunction<...>): Observable<...>; <A, B, C>(op1: OperatorFunction<...>, op2: OperatorFunction<...>, op3: OperatorFunction<...>): Observable<...>; <A, B, C, D>(op1: OperatorFun..."}},toPromise:{defaultValue:null,description:"",name:"toPromise",required:!0,type:{name:"{ <T>(this: Observable<T>): Promise<T>; <T>(this: Observable<T>, PromiseCtor: any): Promise<T>; <T>(this: Observable<...>, PromiseCtor: PromiseConstructorLike): Promise<...>; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#useObservable"]={docgenInfo:useObservable.__docgenInfo,name:"useObservable",path:"src/index.ts#useObservable"})}catch(__react_docgen_typescript_loader_error){}try{inject.displayName="inject",inject.__docgenInfo={description:"",displayName:"inject",props:{toString:{defaultValue:null,description:"Returns a string representation of an object.\nReturns a string representation of an object.\nReturns a string representation of a function.",name:"toString",required:!1,type:{name:"(() => string) | ((() => string) & (() => string)) | (() => string)"}},valueOf:{defaultValue:null,description:"Returns the primitive value of the specified object.\nReturns the primitive value of the specified object.",name:"valueOf",required:!1,type:{name:"(() => symbol) | (() => Object)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#inject"]={docgenInfo:inject.__docgenInfo,name:"inject",path:"src/index.ts#inject"})}catch(__react_docgen_typescript_loader_error){}try{forwardRef.displayName="forwardRef",forwardRef.__docgenInfo={description:"",displayName:"forwardRef",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#forwardRef"]={docgenInfo:forwardRef.__docgenInfo,name:"forwardRef",path:"src/index.ts#forwardRef"})}catch(__react_docgen_typescript_loader_error){}},321:function(module,__webpack_exports__,__webpack_require__){"use strict";var _storybook_theming_create__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(322);__webpack_exports__.a=Object(_storybook_theming_create__WEBPACK_IMPORTED_MODULE_0__.create)({base:"light",brandTitle:"react-svs-di",brandUrl:"https://github.com/csr632/react-svs-di"})},327:function(module,exports,__webpack_require__){__webpack_require__(328),__webpack_require__(440),module.exports=__webpack_require__(441)},349:function(module,exports){},441:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(63),__webpack_require__(251);var _storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(69),_storybook_addon_console__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(624),__webpack_require__(114)),_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(321);Object(_storybook_addon_console__WEBPACK_IMPORTED_MODULE_4__.setConsoleOptions)({panelExclude:[]}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.addDecorator)((function(storyFn,context){return Object(_storybook_addon_console__WEBPACK_IMPORTED_MODULE_4__.withConsole)()(storyFn)(context)})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.addParameters)({options:{}}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.configure)(__webpack_require__(642),module),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.addParameters)({options:{storySort:function storySort(a,b){var fileNameA=a[1].parameters.fileName.split(/(\\|\/)/g).pop(),fileNameB=b[1].parameters.fileName.split(/(\\|\/)/g).pop();return fileNameA.localeCompare(fileNameB)}}}),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.addParameters)({options:{theme:_theme__WEBPACK_IMPORTED_MODULE_5__.a}})}.call(this,__webpack_require__(442)(module))},642:function(module,exports,__webpack_require__){var map={"./di/1.1-basic-vanilla.s.tsx":643,"./di/1.2-basic-rxjs.s.tsx":672,"./di/2.2-dependency-injection.s.tsx":673,"./di/2.3-hierarchical.s.tsx":674,"./di/2.4-abstraction.s.tsx":675,"./di/2.5-configurable.s.tsx":676,"./di/2.6-custom-token.s.tsx":677,"./di/3.1-provider-types.s.tsx":678,"./di/3.2-inject-decorater.s.tsx":679,"./di/4.1-no-provider-hell.s.tsx":680,"./life-cycle/2.8-basic.s.tsx":681,"./plugin-hook/2.1-consumer-hook.s.tsx":682,"./plugin-hook/2.7-di-container-hook.s.tsx":683};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=642},643:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),CountSvs=function(){function CountSvs(){this.sum=new react_svs_di__WEBPACK_IMPORTED_MODULE_1__.c(0)}return CountSvs.prototype.useCountNumber=function(){return this.sum.useValue()},CountSvs.prototype.increase=function(){this.sum.setValueWithFn((function(prev){return prev+1}))},CountSvs.prototype.decrease=function(){this.sum.setValueWithFn((function(prev){return prev-1}))},CountSvs.prototype.reset=function(){this.sum.setValue(0)},CountSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)()],CountSvs)}(),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([CountSvs])((function(){var dataSvs=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([CountSvs])[0],sum=dataSvs.useCountNumber();return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"Basic Demo - SharedState version"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"sum: ",sum),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){dataSvs.increase()}},"increase"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){dataSvs.decrease()}},"decrease"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){dataSvs.reset()}},"reset"))})),{__STORY__:"/**\n * react-svs-di provide great interoperability with react hooks.\n *\n * Inside services, you can define hooks for consumers,\n * to achieve better code cohesion and encapsulation.\n *\n * In those hooks, consumers can subscribe to shared states inside the services.\n * When the shared state change, consumers will be automatically re-rendered.\n *\n * With the help of SharedState,\n * you can create a shared state without using rxjs !\n */\n\nimport React from 'react';\nimport {\n  injectable,\n  withDIContainer,\n  useDIConsumer,\n  SharedState,\n} from 'react-svs-di';\n\n@injectable()\nclass CountSvs {\n  private sum = new SharedState(0);\n  // this is a react hook to be run in consumer\n  useCountNumber() {\n    const value = this.sum.useValue();\n    return value;\n  }\n  public increase() {\n    this.sum.setValueWithFn(prev => prev + 1);\n  }\n  public decrease() {\n    this.sum.setValueWithFn(prev => prev - 1);\n  }\n  public reset() {\n    this.sum.setValue(0);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([CountSvs])(() => {\n  const [dataSvs] = useDIConsumer([CountSvs]);\n  // auto re-render when the SharedState changed\n  const sum = dataSvs.useCountNumber();\n\n  return (\n    <div>\n      <h1>Basic Demo - SharedState version</h1>\n      <p>sum: {sum}</p>\n      <button\n        onClick={() => {\n          dataSvs.increase();\n        }}\n      >\n        increase\n      </button>\n      <button\n        onClick={() => {\n          dataSvs.decrease();\n        }}\n      >\n        decrease\n      </button>\n      <button\n        onClick={() => {\n          dataSvs.reset();\n        }}\n      >\n        reset\n      </button>\n    </div>\n  );\n});\n\nexport default {\n  title: 'basic: vanilla version',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/1.1-basic-vanilla.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"/**\n * react-svs-di provide great interoperability with react hooks.\n *\n * Inside services, you can define hooks for consumers,\n * to achieve better code cohesion and encapsulation.\n *\n * In those hooks, consumers can subscribe to shared states inside the services.\n * When the shared state change, consumers will be automatically re-rendered.\n *\n * With the help of SharedState,\n * you can create a shared state without using rxjs !\n */\n\nimport React from 'react';\nimport {\n  injectable,\n  withDIContainer,\n  useDIConsumer,\n  SharedState,\n} from 'react-svs-di';\n\n@injectable()\nclass CountSvs {\n  private sum = new SharedState(0);\n  // this is a react hook to be run in consumer\n  useCountNumber() {\n    const value = this.sum.useValue();\n    return value;\n  }\n  public increase() {\n    this.sum.setValueWithFn(prev => prev + 1);\n  }\n  public decrease() {\n    this.sum.setValueWithFn(prev => prev - 1);\n  }\n  public reset() {\n    this.sum.setValue(0);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([CountSvs])(() => {\n  const [dataSvs] = useDIConsumer([CountSvs]);\n  // auto re-render when the SharedState changed\n  const sum = dataSvs.useCountNumber();\n\n  return (\n    <div>\n      <h1>Basic Demo - SharedState version</h1>\n      <p>sum: {sum}</p>\n      <button\n        onClick={() => {\n          dataSvs.increase();\n        }}\n      >\n        increase\n      </button>\n      <button\n        onClick={() => {\n          dataSvs.decrease();\n        }}\n      >\n        decrease\n      </button>\n      <button\n        onClick={() => {\n          dataSvs.reset();\n        }}\n      >\n        reset\n      </button>\n    </div>\n  );\n});\n\nexport default {\n  title: 'basic: vanilla version',\n};\n",locationsMap:{}}},title:"basic: vanilla version"}},672:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(324),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),CountSvs=function(){function CountSvs(){this.addend$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a,this.sum$=this.addend$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((function(acc,value){return"reset"===value?0:acc+value}),0))}return CountSvs.prototype.inc=function(){this.addend$.next(1)},CountSvs.prototype.dec=function(){this.addend$.next(-1)},CountSvs.prototype.reset=function(){this.addend$.next("reset")},CountSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)()],CountSvs)}(),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([CountSvs])((function(){var countService=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([CountSvs])[0],sum=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.g)(countService.sum$,0);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"Basic Demo - rxjs version"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"sum: ",sum),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){countService.inc()}},"increase"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){countService.dec()}},"decrease"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){countService.reset()}},"reset"))})),{__STORY__:"import React from 'react';\nimport {\n  withDIContainer,\n  useDIConsumer,\n  useObservable,\n  injectable,\n} from 'react-svs-di';\nimport { Subject } from 'rxjs';\nimport { scan } from 'rxjs/operators';\n\n@injectable()\nclass CountSvs {\n  private readonly addend$ = new Subject<number | 'reset'>();\n  public readonly sum$ = this.addend$.pipe(\n    scan((acc, value) => {\n      if (value === 'reset') return 0;\n      return acc + value;\n    }, 0)\n  );\n  public inc() {\n    this.addend$.next(1);\n  }\n  public dec() {\n    this.addend$.next(-1);\n  }\n  public reset() {\n    this.addend$.next('reset');\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([CountSvs])(() => {\n  const [countService] = useDIConsumer([CountSvs]);\n  // auto re-render when the observable emit\n  const sum = useObservable(countService.sum$, 0);\n  return (\n    <div>\n      <h1>Basic Demo - rxjs version</h1>\n      <p>sum: {sum}</p>\n      <button\n        onClick={() => {\n          countService.inc();\n        }}\n      >\n        increase\n      </button>\n      <button\n        onClick={() => {\n          countService.dec();\n        }}\n      >\n        decrease\n      </button>\n      <button\n        onClick={() => {\n          countService.reset();\n        }}\n      >\n        reset\n      </button>\n    </div>\n  );\n});\n\nexport default {\n  title: 'basic: rxjs version',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/1.2-basic-rxjs.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"import React from 'react';\nimport {\n  withDIContainer,\n  useDIConsumer,\n  useObservable,\n  injectable,\n} from 'react-svs-di';\nimport { Subject } from 'rxjs';\nimport { scan } from 'rxjs/operators';\n\n@injectable()\nclass CountSvs {\n  private readonly addend$ = new Subject<number | 'reset'>();\n  public readonly sum$ = this.addend$.pipe(\n    scan((acc, value) => {\n      if (value === 'reset') return 0;\n      return acc + value;\n    }, 0)\n  );\n  public inc() {\n    this.addend$.next(1);\n  }\n  public dec() {\n    this.addend$.next(-1);\n  }\n  public reset() {\n    this.addend$.next('reset');\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([CountSvs])(() => {\n  const [countService] = useDIConsumer([CountSvs]);\n  // auto re-render when the observable emit\n  const sum = useObservable(countService.sum$, 0);\n  return (\n    <div>\n      <h1>Basic Demo - rxjs version</h1>\n      <p>sum: {sum}</p>\n      <button\n        onClick={() => {\n          countService.inc();\n        }}\n      >\n        increase\n      </button>\n      <button\n        onClick={() => {\n          countService.dec();\n        }}\n      >\n        decrease\n      </button>\n      <button\n        onClick={() => {\n          countService.reset();\n        }}\n      >\n        reset\n      </button>\n    </div>\n  );\n});\n\nexport default {\n  title: 'basic: rxjs version',\n};\n",locationsMap:{}}},title:"basic: rxjs version"}},673:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),LogSvs=function(){function LogSvs(){this.log("creating LogSvs")}return LogSvs.prototype.log=function(msg){console.log("LogSvs:",msg)},LogSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[])],LogSvs)}(),CountSvs=function(){function CountSvs(logService){this.logService=logService,this.sum=new react_svs_di__WEBPACK_IMPORTED_MODULE_1__.c(0),this.logService.log("creating CountSvs")}return CountSvs.prototype.useCountNumber=function(){return this.sum.useValue()},CountSvs.prototype.increase=function(){this.logService.log("increasing"),this.sum.setValueWithFn((function(prev){return prev+1}))},CountSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[LogSvs])],CountSvs)}(),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([CountSvs,LogSvs])((function(){var sum=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([CountSvs])[0].useCountNumber();return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"sum: ",sum),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Child,null))})),{__STORY__:"import React from 'react';\nimport {\n  withDIContainer,\n  useDIConsumer,\n  injectable,\n  SharedState,\n} from 'react-svs-di';\n\n@injectable()\nclass LogSvs {\n  public constructor() {\n    this.log('creating LogSvs');\n  }\n\n  public log(msg: string) {\n    console.log('LogSvs:', msg);\n  }\n}\n\n@injectable()\nclass CountSvs {\n  // CountSvs don't need to know how to get LogSvs\n  // It just 'declare' its dependencies.\n  // and react-svs-di injector will handle it!\n  public constructor(private logService: LogSvs) {\n    this.logService.log('creating CountSvs');\n  }\n\n  private sum = new SharedState(0);\n\n  useCountNumber() {\n    const value = this.sum.useValue();\n    return value;\n  }\n  public increase() {\n    this.logService.log('increasing');\n    this.sum.setValueWithFn(prev => prev + 1);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([CountSvs, LogSvs])(() => {\n  const [countService] = useDIConsumer([CountSvs]);\n  // auto re-render when the observable emit\n  const sum = countService.useCountNumber();\n\n  return (\n    <div>\n      <p>sum: {sum}</p>\n      <Child />\n    </div>\n  );\n});\n\nconst Child: React.FC = () => {\n  const [countService, logSvs] = useDIConsumer([CountSvs, LogSvs]);\n  React.useEffect(() => {\n    logSvs.log('Child mounted');\n  }, [logSvs]);\n  return (\n    <div>\n      <button\n        type=\"button\"\n        onClick={() => {\n          countService.increase();\n        }}\n      >\n        increase\n      </button>\n    </div>\n  );\n};\n\nexport default {\n  title: 'dependency-injection',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.2-dependency-injection.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}}),Child=function(){var _a=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([CountSvs,LogSvs]),countService=_a[0],logSvs=_a[1];return react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect((function(){logSvs.log("Child mounted")}),[logSvs]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{type:"button",onClick:function(){countService.increase()}},"increase"))};__webpack_exports__.default={parameters:{storySource:{source:"import React from 'react';\nimport {\n  withDIContainer,\n  useDIConsumer,\n  injectable,\n  SharedState,\n} from 'react-svs-di';\n\n@injectable()\nclass LogSvs {\n  public constructor() {\n    this.log('creating LogSvs');\n  }\n\n  public log(msg: string) {\n    console.log('LogSvs:', msg);\n  }\n}\n\n@injectable()\nclass CountSvs {\n  // CountSvs don't need to know how to get LogSvs\n  // It just 'declare' its dependencies.\n  // and react-svs-di injector will handle it!\n  public constructor(private logService: LogSvs) {\n    this.logService.log('creating CountSvs');\n  }\n\n  private sum = new SharedState(0);\n\n  useCountNumber() {\n    const value = this.sum.useValue();\n    return value;\n  }\n  public increase() {\n    this.logService.log('increasing');\n    this.sum.setValueWithFn(prev => prev + 1);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([CountSvs, LogSvs])(() => {\n  const [countService] = useDIConsumer([CountSvs]);\n  // auto re-render when the observable emit\n  const sum = countService.useCountNumber();\n\n  return (\n    <div>\n      <p>sum: {sum}</p>\n      <Child />\n    </div>\n  );\n});\n\nconst Child: React.FC = () => {\n  const [countService, logSvs] = useDIConsumer([CountSvs, LogSvs]);\n  React.useEffect(() => {\n    logSvs.log('Child mounted');\n  }, [logSvs]);\n  return (\n    <div>\n      <button\n        type=\"button\"\n        onClick={() => {\n          countService.increase();\n        }}\n      >\n        increase\n      </button>\n    </div>\n  );\n};\n\nexport default {\n  title: 'dependency-injection',\n};\n",locationsMap:{}}},title:"dependency-injection"}},674:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),fooCount=0,Foo=function(){function Foo(){this.id=fooCount,fooCount++,console.log("Creating Foo"+this.id)}return Foo=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[])],Foo)}(),Bar=function(){function Bar(foo){this.foo=foo,console.log("Creating Bar")}return Bar.prototype.say=function(){console.log("Bar says: I got foo"+this.foo.id)},Bar=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[Foo])],Bar)}(),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([Foo])((function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Child1,null),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Child2,null))})),{__STORY__:"import React, { useEffect } from 'react';\nimport { injectable, withDIContainer, useDIConsumer } from 'react-svs-di';\n\nlet fooCount = 0;\n\n@injectable()\nclass Foo {\n  id: number;\n\n  constructor() {\n    this.id = fooCount;\n    fooCount++;\n    console.log(`Creating Foo${this.id}`);\n  }\n}\n\n@injectable()\nclass Bar {\n  // get foo instance from parent\n  constructor(private foo: Foo) {\n    console.log('Creating Bar');\n  }\n\n  say() {\n    console.log(`Bar says: I got foo${this.foo.id}`);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([Foo])(() => {\n  return (\n    <>\n      <Child1 />\n      <Child2 />\n    </>\n  );\n});\n\nconst Child1: React.FC = withDIContainer([Bar])(() => {\n  // get foo instance from parent\n  const [bar] = useDIConsumer([Bar]);\n  useEffect(() => {\n    bar.say();\n  });\n  return <h1>HierarchicalDemo Child1</h1>;\n});\n\nconst Child2: React.FC = withDIContainer([Foo, Bar])(() => {\n  // get foo instance from its own provider\n  // shadowing the parent's provider\n  const [bar] = useDIConsumer([Bar]);\n  useEffect(() => {\n    bar.say();\n  });\n  return <h1>HierarchicalDemo Child2</h1>;\n});\n\nexport default {\n  title: 'hierarchical',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.3-hierarchical.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}}),Child1=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([Bar])((function(){var bar=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([Bar])[0];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){bar.say()})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"HierarchicalDemo Child1")})),Child2=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([Foo,Bar])((function(){var bar=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([Bar])[0];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){bar.say()})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"HierarchicalDemo Child2")}));__webpack_exports__.default={parameters:{storySource:{source:"import React, { useEffect } from 'react';\nimport { injectable, withDIContainer, useDIConsumer } from 'react-svs-di';\n\nlet fooCount = 0;\n\n@injectable()\nclass Foo {\n  id: number;\n\n  constructor() {\n    this.id = fooCount;\n    fooCount++;\n    console.log(`Creating Foo${this.id}`);\n  }\n}\n\n@injectable()\nclass Bar {\n  // get foo instance from parent\n  constructor(private foo: Foo) {\n    console.log('Creating Bar');\n  }\n\n  say() {\n    console.log(`Bar says: I got foo${this.foo.id}`);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([Foo])(() => {\n  return (\n    <>\n      <Child1 />\n      <Child2 />\n    </>\n  );\n});\n\nconst Child1: React.FC = withDIContainer([Bar])(() => {\n  // get foo instance from parent\n  const [bar] = useDIConsumer([Bar]);\n  useEffect(() => {\n    bar.say();\n  });\n  return <h1>HierarchicalDemo Child1</h1>;\n});\n\nconst Child2: React.FC = withDIContainer([Foo, Bar])(() => {\n  // get foo instance from its own provider\n  // shadowing the parent's provider\n  const [bar] = useDIConsumer([Bar]);\n  useEffect(() => {\n    bar.say();\n  });\n  return <h1>HierarchicalDemo Child2</h1>;\n});\n\nexport default {\n  title: 'hierarchical',\n};\n",locationsMap:{}}},title:"hierarchical"}},675:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var extendStatics,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),LogSvs=function LogSvs(){this.log("creating base class LogSvs")},ActualLogSvs=function(_super){function ActualLogSvs(){return _super.call(this)||this}return __extends(ActualLogSvs,_super),ActualLogSvs.prototype.log=function(msg){console.log("Enhanced logger:",msg)},ActualLogSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[])],ActualLogSvs)}(LogSvs),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([{provide:LogSvs,useClass:ActualLogSvs}])((function(){var logSvs=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([LogSvs])[0];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){logSvs.log("Consumer is using abstraction!")})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"Abstraction demo"))})),{__STORY__:"import React, { useEffect } from 'react';\nimport { withDIContainer, useDIConsumer, injectable } from 'react-svs-di';\n\n// dependency injection encourage you\n// to follow the golden rule in object-oriented design:\n// depend on abstractions, don't depend on implementations.\n// (dependency inversion principle)\n\nabstract class LogSvs {\n  public constructor() {\n    this.log('creating base class LogSvs');\n  }\n\n  // The actual implement may use console.log, or alert,\n  // or sent log to server.\n  public abstract log(msg: string);\n\n  // can define more abstract methods here\n}\n\n@injectable()\nclass ActualLogSvs extends LogSvs {\n  public constructor() {\n    super();\n  }\n\n  log(msg: string) {\n    console.log('Enhanced logger:', msg);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([\n  // Abstractions are bind to their implementations at application root\n  {\n    provide: LogSvs,\n    useClass: ActualLogSvs,\n  },\n])(() => {\n  // DI consumers don't couple to the actual implementation.\n  // They should only depend on the abstraction.\n  // The actual implementation is hidden by the abstraction.\n  // Benifit: we can inject different implementation in different envirenment (production, test, different user role, ...).\n  // And typescript do the type-check, ensuring we don't break the \"contract\".\n  const [logSvs] = useDIConsumer([LogSvs]);\n\n  useEffect(() => {\n    logSvs.log('Consumer is using abstraction!');\n  });\n\n  return (\n    <div>\n      <h1>Abstraction demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'abstraction',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.4-abstraction.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"import React, { useEffect } from 'react';\nimport { withDIContainer, useDIConsumer, injectable } from 'react-svs-di';\n\n// dependency injection encourage you\n// to follow the golden rule in object-oriented design:\n// depend on abstractions, don't depend on implementations.\n// (dependency inversion principle)\n\nabstract class LogSvs {\n  public constructor() {\n    this.log('creating base class LogSvs');\n  }\n\n  // The actual implement may use console.log, or alert,\n  // or sent log to server.\n  public abstract log(msg: string);\n\n  // can define more abstract methods here\n}\n\n@injectable()\nclass ActualLogSvs extends LogSvs {\n  public constructor() {\n    super();\n  }\n\n  log(msg: string) {\n    console.log('Enhanced logger:', msg);\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([\n  // Abstractions are bind to their implementations at application root\n  {\n    provide: LogSvs,\n    useClass: ActualLogSvs,\n  },\n])(() => {\n  // DI consumers don't couple to the actual implementation.\n  // They should only depend on the abstraction.\n  // The actual implementation is hidden by the abstraction.\n  // Benifit: we can inject different implementation in different envirenment (production, test, different user role, ...).\n  // And typescript do the type-check, ensuring we don't break the \"contract\".\n  const [logSvs] = useDIConsumer([LogSvs]);\n\n  useEffect(() => {\n    logSvs.log('Consumer is using abstraction!');\n  });\n\n  return (\n    <div>\n      <h1>Abstraction demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'abstraction',\n};\n",locationsMap:{}}},title:"abstraction"}},676:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),LogSvs=function(){function LogSvs(prefix){this.prefix=prefix,this.log("creating LogSvs")}return LogSvs.prototype.log=function(msg){console.log(this.prefix+": "+msg)},LogSvs}();var Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([function configLogSvs(prefix){return{provide:LogSvs,useFactory:function(){return new LogSvs(prefix)}}}("configurable demo")])((function(){var logSvs=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([LogSvs])[0];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){logSvs.log("logging")})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"Configurable demo"))})),{__STORY__:"import React, { useEffect } from 'react';\nimport { withDIContainer, useDIConsumer, IProvider } from 'react-svs-di';\n\nclass LogSvs {\n  public constructor(private prefix: string) {\n    this.log('creating LogSvs');\n  }\n\n  public log(msg: string) {\n    console.log(`${this.prefix}: ${msg}`);\n  }\n}\n\n// This is a useful pattern to configure injectable services\nfunction configLogSvs(prefix: string): IProvider {\n  return { provide: LogSvs, useFactory: () => new LogSvs(prefix) };\n}\n\nexport const Demo: React.FC = withDIContainer([\n  configLogSvs('configurable demo'),\n])(() => {\n  // DI consumers don't couple to the actual implementation.\n  // They should only depend on the abstraction.\n  // The actual implementation is hidden by the abstraction.\n  const [logSvs] = useDIConsumer([LogSvs]);\n\n  useEffect(() => {\n    logSvs.log('logging');\n  });\n\n  return (\n    <div>\n      <h1>Configurable demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'configurable',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.5-configurable.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"import React, { useEffect } from 'react';\nimport { withDIContainer, useDIConsumer, IProvider } from 'react-svs-di';\n\nclass LogSvs {\n  public constructor(private prefix: string) {\n    this.log('creating LogSvs');\n  }\n\n  public log(msg: string) {\n    console.log(`${this.prefix}: ${msg}`);\n  }\n}\n\n// This is a useful pattern to configure injectable services\nfunction configLogSvs(prefix: string): IProvider {\n  return { provide: LogSvs, useFactory: () => new LogSvs(prefix) };\n}\n\nexport const Demo: React.FC = withDIContainer([\n  configLogSvs('configurable demo'),\n])(() => {\n  // DI consumers don't couple to the actual implementation.\n  // They should only depend on the abstraction.\n  // The actual implementation is hidden by the abstraction.\n  const [logSvs] = useDIConsumer([LogSvs]);\n\n  useEffect(() => {\n    logSvs.log('logging');\n  });\n\n  return (\n    <div>\n      <h1>Configurable demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'configurable',\n};\n",locationsMap:{}}},title:"configurable"}},677:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),LogSvs=function(){function LogSvs(){}return LogSvs.prototype.log=function(){console.log("log!")},LogSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)()],LogSvs)}(),tokenLogSvs=new react_svs_di__WEBPACK_IMPORTED_MODULE_1__.a("I am token id for LogSvs"),tokenLogSvs2=new react_svs_di__WEBPACK_IMPORTED_MODULE_1__.a("I am token id for LogSvs"),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([{provide:tokenLogSvs,useClass:LogSvs}])((function(){var _a=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([tokenLogSvs,tokenLogSvs2]),logSvs=_a[0],logSvs2=_a[1];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(logSvs2!==logSvs)throw new Error("should get same instance");logSvs.log()})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"CustomToken demo"))})),{__STORY__:"import React, { useEffect } from 'react';\nimport {\n  CustomToken,\n  withDIContainer,\n  useDIConsumer,\n  injectable,\n} from 'react-svs-di';\n\n@injectable()\nclass LogSvs {\n  log() {\n    console.log('log!');\n  }\n}\n\n// If you don't wan't to use class constructor as DI token,\n// you can use CustomToken!\n\n// The type information of value is stored in token!\nconst tokenLogSvs = new CustomToken<LogSvs>('I am token id for LogSvs');\n\n// differnt CustomToken object with same \"token id\" is equivalent!\nconst tokenLogSvs2 = new CustomToken<LogSvs>('I am token id for LogSvs');\n\nexport const Demo: React.FC = withDIContainer([\n  { provide: tokenLogSvs, useClass: LogSvs },\n])(() => {\n  const [logSvs, logSvs2] = useDIConsumer([tokenLogSvs, tokenLogSvs2]);\n  // consumer can get correct type information from the custom token\n\n  useEffect(() => {\n    if (logSvs2 !== logSvs) throw new Error(`should get same instance`);\n    logSvs.log();\n  });\n\n  return (\n    <div>\n      <h1>CustomToken demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'custom token',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.6-custom-token.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"import React, { useEffect } from 'react';\nimport {\n  CustomToken,\n  withDIContainer,\n  useDIConsumer,\n  injectable,\n} from 'react-svs-di';\n\n@injectable()\nclass LogSvs {\n  log() {\n    console.log('log!');\n  }\n}\n\n// If you don't wan't to use class constructor as DI token,\n// you can use CustomToken!\n\n// The type information of value is stored in token!\nconst tokenLogSvs = new CustomToken<LogSvs>('I am token id for LogSvs');\n\n// differnt CustomToken object with same \"token id\" is equivalent!\nconst tokenLogSvs2 = new CustomToken<LogSvs>('I am token id for LogSvs');\n\nexport const Demo: React.FC = withDIContainer([\n  { provide: tokenLogSvs, useClass: LogSvs },\n])(() => {\n  const [logSvs, logSvs2] = useDIConsumer([tokenLogSvs, tokenLogSvs2]);\n  // consumer can get correct type information from the custom token\n\n  useEffect(() => {\n    if (logSvs2 !== logSvs) throw new Error(`should get same instance`);\n    logSvs.log();\n  });\n\n  return (\n    <div>\n      <h1>CustomToken demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'custom token',\n};\n",locationsMap:{}}},title:"custom token"}},678:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(320),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),LogSvs=function(){function LogSvs(){}return LogSvs.prototype.log=function(msg){console.log(msg)},LogSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)()],LogSvs)}(),classProvider={provide:LogSvs,useClass:LogSvs},aliasTokenForSameSvsInstance=Symbol("aliasTokenForSameSvsInstance"),existingProvider={provide:aliasTokenForSameSvsInstance,useExisting:LogSvs},CountSvs=function(){function CountSvs(init){this.count=init}return CountSvs.prototype.inc=function(){this.count++},CountSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[Number])],CountSvs)}(),factoryProvider={provide:CountSvs,useFactory:function(logSvs){return logSvs.log("creating CountSvs"),new CountSvs(123)},deps:[LogSvs]},lodashToken=new react_svs_di__WEBPACK_IMPORTED_MODULE_1__.a("lodash token"),valueProvider={provide:lodashToken,useValue:lodash__WEBPACK_IMPORTED_MODULE_2___default.a},Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([classProvider,existingProvider,factoryProvider,valueProvider])((function(){var _a=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([LogSvs,aliasTokenForSameSvsInstance,CountSvs,lodashToken]),logSvs=_a[0],logSvs2=_a[1],countSvs=_a[2],lodash=_a[3];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(logSvs!==logSvs2)throw new Error("should get same instance when using existingProvider");logSvs.log(countSvs.count.toString()),countSvs.inc(),logSvs.log(countSvs.count.toString())})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,lodash.capitalize("providerTypes demo")))})),{__STORY__:"import React, { useEffect } from 'react';\nimport {\n  IValueProvider,\n  CustomToken,\n  IExistingProvider,\n  withDIContainer,\n  IClassProvider,\n  IFactoryProvider,\n  useDIConsumer,\n  injectable,\n} from 'react-svs-di';\nimport _ from 'lodash';\n\n@injectable()\nclass LogSvs {\n  log(msg: string) {\n    console.log(msg);\n  }\n}\n\n// or you can use 'LogSvs' as shorthand\nconst classProvider: IClassProvider = { provide: LogSvs, useClass: LogSvs };\n\nconst aliasTokenForSameSvsInstance = Symbol('aliasTokenForSameSvsInstance');\nconst existingProvider: IExistingProvider = {\n  provide: aliasTokenForSameSvsInstance,\n  useExisting: LogSvs,\n};\n\n@injectable()\nclass CountSvs {\n  public count: number;\n\n  constructor(init: number) {\n    this.count = init;\n  }\n\n  inc() {\n    this.count++;\n  }\n}\n\nconst factoryProvider: IFactoryProvider = {\n  provide: CountSvs,\n  useFactory: (logSvs: LogSvs) => {\n    logSvs.log('creating CountSvs');\n    return new CountSvs(123);\n  },\n  deps: [LogSvs],\n};\n\nconst lodashToken = new CustomToken<typeof _>('lodash token');\nconst valueProvider: IValueProvider = {\n  provide: lodashToken,\n  useValue: _,\n};\n\nexport const Demo: React.FC = withDIContainer([\n  // equivalent to shorthand LogSvs\n  classProvider,\n  existingProvider,\n  factoryProvider,\n  valueProvider,\n])(() => {\n  const [logSvs, logSvs2, countSvs, lodash] = useDIConsumer([\n    LogSvs,\n    aliasTokenForSameSvsInstance,\n    CountSvs,\n    lodashToken,\n  ]);\n  useEffect(() => {\n    if (logSvs !== logSvs2)\n      throw new Error(`should get same instance when using existingProvider`);\n\n    logSvs.log(countSvs.count.toString());\n    countSvs.inc();\n    logSvs.log(countSvs.count.toString());\n  });\n\n  return (\n    <div>\n      <h1>{lodash.capitalize('providerTypes demo')}</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'provider types',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/3.1-provider-types.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"import React, { useEffect } from 'react';\nimport {\n  IValueProvider,\n  CustomToken,\n  IExistingProvider,\n  withDIContainer,\n  IClassProvider,\n  IFactoryProvider,\n  useDIConsumer,\n  injectable,\n} from 'react-svs-di';\nimport _ from 'lodash';\n\n@injectable()\nclass LogSvs {\n  log(msg: string) {\n    console.log(msg);\n  }\n}\n\n// or you can use 'LogSvs' as shorthand\nconst classProvider: IClassProvider = { provide: LogSvs, useClass: LogSvs };\n\nconst aliasTokenForSameSvsInstance = Symbol('aliasTokenForSameSvsInstance');\nconst existingProvider: IExistingProvider = {\n  provide: aliasTokenForSameSvsInstance,\n  useExisting: LogSvs,\n};\n\n@injectable()\nclass CountSvs {\n  public count: number;\n\n  constructor(init: number) {\n    this.count = init;\n  }\n\n  inc() {\n    this.count++;\n  }\n}\n\nconst factoryProvider: IFactoryProvider = {\n  provide: CountSvs,\n  useFactory: (logSvs: LogSvs) => {\n    logSvs.log('creating CountSvs');\n    return new CountSvs(123);\n  },\n  deps: [LogSvs],\n};\n\nconst lodashToken = new CustomToken<typeof _>('lodash token');\nconst valueProvider: IValueProvider = {\n  provide: lodashToken,\n  useValue: _,\n};\n\nexport const Demo: React.FC = withDIContainer([\n  // equivalent to shorthand LogSvs\n  classProvider,\n  existingProvider,\n  factoryProvider,\n  valueProvider,\n])(() => {\n  const [logSvs, logSvs2, countSvs, lodash] = useDIConsumer([\n    LogSvs,\n    aliasTokenForSameSvsInstance,\n    CountSvs,\n    lodashToken,\n  ]);\n  useEffect(() => {\n    if (logSvs !== logSvs2)\n      throw new Error(`should get same instance when using existingProvider`);\n\n    logSvs.log(countSvs.count.toString());\n    countSvs.inc();\n    logSvs.log(countSvs.count.toString());\n  });\n\n  return (\n    <div>\n      <h1>{lodash.capitalize('providerTypes demo')}</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'provider types',\n};\n",locationsMap:{}}},title:"provider types"}},679:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),dataToken=Symbol("data token"),InjectDemoSvs=function(){function InjectDemoSvs(data){this.data=data,console.log("creating InjectDemoSvs. data:",JSON.stringify(data))}return InjectDemoSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__param(0,Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.d)(dataToken)),__metadata("design:paramtypes",[Object])],InjectDemoSvs)}(),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([InjectDemoSvs,{provide:dataToken,useValue:{age:123}}])((function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2",null,"InjectDecoratorDemo")})),{__STORY__:"import React from 'react';\nimport { inject, injectable, withDIContainer } from 'react-svs-di';\n\ninterface IData {\n  age: number;\n}\n\nconst dataToken = Symbol('data token');\n\n@injectable()\nclass InjectDemoSvs {\n  // when you are not using class as token, you should use `@inject`\n  // to declare the DI dependencies\n  constructor(@inject(dataToken) private data: IData) {\n    console.log(`creating InjectDemoSvs. data:`, JSON.stringify(data));\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([\n  InjectDemoSvs,\n  {\n    provide: dataToken,\n    useValue: { age: 123 },\n  },\n])(() => {\n  return <h2>InjectDecoratorDemo</h2>;\n});\n\nexport default {\n  title: 'inject decorater',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/3.2-inject-decorater.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"import React from 'react';\nimport { inject, injectable, withDIContainer } from 'react-svs-di';\n\ninterface IData {\n  age: number;\n}\n\nconst dataToken = Symbol('data token');\n\n@injectable()\nclass InjectDemoSvs {\n  // when you are not using class as token, you should use `@inject`\n  // to declare the DI dependencies\n  constructor(@inject(dataToken) private data: IData) {\n    console.log(`creating InjectDemoSvs. data:`, JSON.stringify(data));\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([\n  InjectDemoSvs,\n  {\n    provide: dataToken,\n    useValue: { age: 123 },\n  },\n])(() => {\n  return <h2>InjectDecoratorDemo</h2>;\n});\n\nexport default {\n  title: 'inject decorater',\n};\n",locationsMap:{}}},title:"inject decorater"}},680:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),Foo=function(){function Foo(){}return Foo.prototype.useDIContainerHook=function(){var qux=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([Qux])[0];this.qux=qux},Foo=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)()],Foo)}(),Bar=function(){function Bar(foo){this.foo=foo}return Bar=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[Foo])],Bar)}(),Baz=function(){function Baz(bar){this.bar=bar}return Baz=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[Bar])],Baz)}(),Qux=function(){function Qux(baz,foo){this.baz=baz}return Qux=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)(),__metadata("design:paramtypes",[Baz,Foo])],Qux)}(),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([Baz,Qux,Foo,Bar])((function(){var _a=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([Foo,Bar,Baz,Qux]),foo=_a[0],bar=_a[1],baz=_a[2],qux=_a[3];return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){console.log(foo.qux,bar.foo,baz.bar,qux.baz)})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"NoProviderHell Demo"))})),{__STORY__:"/**\n If you have used some \"state management with hooks\" tools,\n you may notice the \"provider hell\" problem in them.\n You may end up with dozens of \"state provider\" nested\n in each other:\n\n<Container1.Provider>\n   <Container2.Provider>\n      ...\n        <Container12.Provider>\n          MyApp\n        </Container12.Provider>\n      ...\n    </Container2.Provider>\n</Container1.Provider>\n\n This is ugly. \n see: https://github.com/jamiebuilds/unstated-next/issues/35\n \n What's worse, you have to be really careful about their order. If Container1 depends on Container2, Container2 must be put \"above\" Container1. You must read the implementation of all containers and make sure the order is right. Imagine 5 containers with dependency on each other.\n\n What's worse, most of the tools out there are not good at handling circular dependency (when it is necessory). If your containers have circular dependency, you must create some 'unreasonable workaround containers', throwing \"single responsibility principle\" out of the window.\n */\n\n/** \nWith react-svs-di, we can avoid all of these. \nreact-svs-di use React context provider to broadcast **injector**, not services. The granularity is bigger. One injector can have multiple services in it.\nAs long as services live in the same injector, they can get each other's reference! You don't need to care about the 'declare order'.\nreact-svs-di makes it easy to workaround circular dependency, by using 'DIContainerHook'. (Although we encourage you to eliminate circular dependency when appropriate)\n */\n\nimport React, { useEffect } from 'react';\nimport {\n  injectable,\n  withDIContainer,\n  useDIConsumer,\n  WithDIContainerHook,\n} from 'react-svs-di';\n\n@injectable()\nclass Foo implements WithDIContainerHook {\n  public qux!: Qux;\n\n  useDIContainerHook() {\n    // circular dependency\n    const [qux] = useDIConsumer([Qux]);\n    this.qux = qux;\n  }\n}\n\n@injectable()\nclass Bar {\n  constructor(public foo: Foo) {}\n}\n\n@injectable()\nclass Baz {\n  constructor(public bar: Bar) {}\n}\n\n@injectable()\nclass Qux {\n  constructor(public baz: Baz, foo: Foo) {}\n}\n\n// The array order dosen't matter. You can reorder it.\nexport const Demo: React.FC = withDIContainer([Baz, Qux, Foo, Bar])(() => {\n  // Order of useDIConsumer's argument also dosen't matter.\n  const [foo, bar, baz, qux] = useDIConsumer([Foo, Bar, Baz, Qux]);\n  useEffect(() => {\n    console.log(foo.qux, bar.foo, baz.bar, qux.baz);\n  });\n  return (\n    <div>\n      <h1>NoProviderHell Demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'no provider hell',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/4.1-no-provider-hell.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/di",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"/**\n If you have used some \"state management with hooks\" tools,\n you may notice the \"provider hell\" problem in them.\n You may end up with dozens of \"state provider\" nested\n in each other:\n\n<Container1.Provider>\n   <Container2.Provider>\n      ...\n        <Container12.Provider>\n          MyApp\n        </Container12.Provider>\n      ...\n    </Container2.Provider>\n</Container1.Provider>\n\n This is ugly. \n see: https://github.com/jamiebuilds/unstated-next/issues/35\n \n What's worse, you have to be really careful about their order. If Container1 depends on Container2, Container2 must be put \"above\" Container1. You must read the implementation of all containers and make sure the order is right. Imagine 5 containers with dependency on each other.\n\n What's worse, most of the tools out there are not good at handling circular dependency (when it is necessory). If your containers have circular dependency, you must create some 'unreasonable workaround containers', throwing \"single responsibility principle\" out of the window.\n */\n\n/** \nWith react-svs-di, we can avoid all of these. \nreact-svs-di use React context provider to broadcast **injector**, not services. The granularity is bigger. One injector can have multiple services in it.\nAs long as services live in the same injector, they can get each other's reference! You don't need to care about the 'declare order'.\nreact-svs-di makes it easy to workaround circular dependency, by using 'DIContainerHook'. (Although we encourage you to eliminate circular dependency when appropriate)\n */\n\nimport React, { useEffect } from 'react';\nimport {\n  injectable,\n  withDIContainer,\n  useDIConsumer,\n  WithDIContainerHook,\n} from 'react-svs-di';\n\n@injectable()\nclass Foo implements WithDIContainerHook {\n  public qux!: Qux;\n\n  useDIContainerHook() {\n    // circular dependency\n    const [qux] = useDIConsumer([Qux]);\n    this.qux = qux;\n  }\n}\n\n@injectable()\nclass Bar {\n  constructor(public foo: Foo) {}\n}\n\n@injectable()\nclass Baz {\n  constructor(public bar: Bar) {}\n}\n\n@injectable()\nclass Qux {\n  constructor(public baz: Baz, foo: Foo) {}\n}\n\n// The array order dosen't matter. You can reorder it.\nexport const Demo: React.FC = withDIContainer([Baz, Qux, Foo, Bar])(() => {\n  // Order of useDIConsumer's argument also dosen't matter.\n  const [foo, bar, baz, qux] = useDIConsumer([Foo, Bar, Baz, Qux]);\n  useEffect(() => {\n    console.log(foo.qux, bar.foo, baz.bar, qux.baz);\n  });\n  return (\n    <div>\n      <h1>NoProviderHell Demo</h1>\n    </div>\n  );\n});\n\nexport default {\n  title: 'no provider hell',\n};\n",locationsMap:{}}},title:"no provider hell"}},681:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react_svs_di__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(325),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),someObservable$=rxjs__WEBPACK_IMPORTED_MODULE_1__.a(1e3),Demo=addSourceDecorator((function(){var _a=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),showChild=_a[0],setShowChild=_a[1];return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h1",null,"LifeCycle Demo"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("button",{type:"button",onClick:function(){setShowChild((function(v){return!v}))}},"toggle showChild")),showChild&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Child,null))}),{__STORY__:"import {\n  injectable,\n  LifeCycle,\n  withDIContainer,\n  WithAutoLifeCycle,\n} from 'react-svs-di';\nimport * as Rx from 'rxjs';\nimport React, { useState } from 'react';\n\nconst someObservable$ = Rx.interval(1000);\n\nexport const Demo: React.FC = () => {\n  const [showChild, setShowChild] = useState(false);\n\n  return (\n    <div>\n      <h1>LifeCycle Demo</h1>\n      <div>\n        <button\n          type=\"button\"\n          onClick={() => {\n            setShowChild(v => !v);\n          }}\n        >\n          toggle showChild\n        </button>\n      </div>\n      {showChild && <Child />}\n    </div>\n  );\n};\n\n// With the help of `LifeCycle`,\n// we can easily turn 'component lifecycle' (which is usually in view layer)\n// into a 'data stream'! (which is in data/model layer)\n\n// Implements AutoBindLifeCycle to help you avoid typo.\n// It is not necessary (but we recommend it).\n@injectable()\nclass LifeCycleMonitorSvs implements WithAutoLifeCycle {\n  // One LifeCycle instance track **one** component instance's lifecycle.\n  // The `autoLifeCycle` property is automatically\n  // bound to the lifecycle of its host component(DIContainer).\n  autoLifeCycle = new LifeCycle();\n\n  constructor() {\n    this.autoLifeCycle.mount$.subscribe(() => {\n      console.log('DIContainer Mounted!');\n    });\n    this.autoLifeCycle.unMount$.subscribe(() => {\n      console.log('DIContainer unMounted!');\n    });\n    // will auto un-subscribe when host component unMount\n    // to avoid memory leak\n    this.autoLifeCycle.subscribeInLifeCycle(someObservable$, v => {\n      console.log('get value', v);\n    });\n  }\n}\n\n// The DIContainer HOC\nconst Child: React.FC = withDIContainer([LifeCycleMonitorSvs])(() => {\n  return <p>Child</p>;\n});\n\nexport default {\n  title: 'life cycle to rxjs',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.8-basic.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/life-cycle",__IDS_TO_FRAMEWORKS__:{}}),LifeCycleMonitorSvs=function(){function LifeCycleMonitorSvs(){this.autoLifeCycle=new react_svs_di__WEBPACK_IMPORTED_MODULE_0__.b,this.autoLifeCycle.mount$.subscribe((function(){console.log("DIContainer Mounted!")})),this.autoLifeCycle.unMount$.subscribe((function(){console.log("DIContainer unMounted!")})),this.autoLifeCycle.subscribeInLifeCycle(someObservable$,(function(v){console.log("get value",v)}))}return LifeCycleMonitorSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_0__.e)(),__metadata("design:paramtypes",[])],LifeCycleMonitorSvs)}(),Child=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_0__.h)([LifeCycleMonitorSvs])((function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p",null,"Child")}));__webpack_exports__.default={parameters:{storySource:{source:"import {\n  injectable,\n  LifeCycle,\n  withDIContainer,\n  WithAutoLifeCycle,\n} from 'react-svs-di';\nimport * as Rx from 'rxjs';\nimport React, { useState } from 'react';\n\nconst someObservable$ = Rx.interval(1000);\n\nexport const Demo: React.FC = () => {\n  const [showChild, setShowChild] = useState(false);\n\n  return (\n    <div>\n      <h1>LifeCycle Demo</h1>\n      <div>\n        <button\n          type=\"button\"\n          onClick={() => {\n            setShowChild(v => !v);\n          }}\n        >\n          toggle showChild\n        </button>\n      </div>\n      {showChild && <Child />}\n    </div>\n  );\n};\n\n// With the help of `LifeCycle`,\n// we can easily turn 'component lifecycle' (which is usually in view layer)\n// into a 'data stream'! (which is in data/model layer)\n\n// Implements AutoBindLifeCycle to help you avoid typo.\n// It is not necessary (but we recommend it).\n@injectable()\nclass LifeCycleMonitorSvs implements WithAutoLifeCycle {\n  // One LifeCycle instance track **one** component instance's lifecycle.\n  // The `autoLifeCycle` property is automatically\n  // bound to the lifecycle of its host component(DIContainer).\n  autoLifeCycle = new LifeCycle();\n\n  constructor() {\n    this.autoLifeCycle.mount$.subscribe(() => {\n      console.log('DIContainer Mounted!');\n    });\n    this.autoLifeCycle.unMount$.subscribe(() => {\n      console.log('DIContainer unMounted!');\n    });\n    // will auto un-subscribe when host component unMount\n    // to avoid memory leak\n    this.autoLifeCycle.subscribeInLifeCycle(someObservable$, v => {\n      console.log('get value', v);\n    });\n  }\n}\n\n// The DIContainer HOC\nconst Child: React.FC = withDIContainer([LifeCycleMonitorSvs])(() => {\n  return <p>Child</p>;\n});\n\nexport default {\n  title: 'life cycle to rxjs',\n};\n",locationsMap:{}}},title:"life cycle to rxjs"}},682:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_svs_di__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(690),swr__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(323),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(326),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(324),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource);function mockAPI(id){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,new Promise((function(res){setTimeout((function(){res("response for id: "+id)}),300)}))]}))}))}var DataSvs=function(){function DataSvs(){this.autoLifeCycle=new react_svs_di__WEBPACK_IMPORTED_MODULE_1__.b,this.inc$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a,this.dec$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a,this.sum$=Object(rxjs__WEBPACK_IMPORTED_MODULE_3__.a)(this.inc$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(1)),this.dec$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(-1))).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((function(acc,v){return acc+v}),0))}return DataSvs.prototype.useDataSvsHooks1=function(){var dataId=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.g)(this.sum$,0),_a=Object(swr__WEBPACK_IMPORTED_MODULE_4__.a)(dataId.toString(),mockAPI);return{data:_a.data,isValidating:_a.isValidating}},DataSvs.prototype.inc=function(){this.inc$.next()},DataSvs.prototype.dec=function(){this.dec$.next()},DataSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.e)()],DataSvs)}(),Demo=addSourceDecorator(Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.h)([DataSvs])((function(){var dataSvs=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_1__.f)([DataSvs])[0],data=dataSvs.useDataSvsHooks1().data;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"ConsumerHook Demo"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,data||"loading"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){dataSvs.inc()}},"increase data id"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function(){dataSvs.dec()}},"decrease data id"))})),{__STORY__:"/**\n * react-svs-di provide great interoperability with react hooks.\n *\n * Inside services, you can define hooks for consumers ,\n * to achieve better code cohesion and encapsulation.\n *\n * In those hooks, you can use those awesome hook libraries.\n * (benefit from the react community)\n * For example, swr: https://github.com/zeit/swr\n * (They don't provide rxjs version)\n */\n\nimport React from 'react';\nimport {\n  injectable,\n  WithAutoLifeCycle,\n  LifeCycle,\n  withDIContainer,\n  useObservable,\n  useDIConsumer,\n} from 'react-svs-di';\nimport { Subject, merge } from 'rxjs';\nimport useSWR from 'swr';\nimport { scan, mapTo } from 'rxjs/operators';\n\nasync function mockAPI(id: string) {\n  return new Promise<string>(res => {\n    setTimeout(() => {\n      res(`response for id: ${id}`);\n    }, 300);\n  });\n}\n\n@injectable()\nclass DataSvs implements WithAutoLifeCycle {\n  autoLifeCycle = new LifeCycle();\n\n  private inc$ = new Subject<null>();\n  private dec$ = new Subject<null>();\n\n  private sum$ = merge(\n    this.inc$.pipe(mapTo(1)),\n    this.dec$.pipe(mapTo(-1))\n  ).pipe(scan((acc, v) => acc + v, 0));\n\n  useDataSvsHooks1() {\n    const dataId = useObservable(this.sum$, 0);\n    const { data, isValidating } = useSWR(dataId.toString(), mockAPI);\n    return { data, isValidating };\n  }\n  inc() {\n    this.inc$.next();\n  }\n  dec() {\n    this.dec$.next();\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([DataSvs])(() => {\n  const [dataSvs] = useDIConsumer([DataSvs]);\n  const { data } = dataSvs.useDataSvsHooks1();\n\n  return (\n    <div>\n      <h1>ConsumerHook Demo</h1>\n      <p>{data ? data : 'loading'}</p>\n      <button\n        onClick={() => {\n          dataSvs.inc();\n        }}\n      >\n        increase data id\n      </button>\n      <button\n        onClick={() => {\n          dataSvs.dec();\n        }}\n      >\n        decrease data id\n      </button>\n    </div>\n  );\n});\n\nexport default {\n  title: 'plugin-hook: consumer-hook',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.1-consumer-hook.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/plugin-hook",__IDS_TO_FRAMEWORKS__:{}});__webpack_exports__.default={parameters:{storySource:{source:"/**\n * react-svs-di provide great interoperability with react hooks.\n *\n * Inside services, you can define hooks for consumers ,\n * to achieve better code cohesion and encapsulation.\n *\n * In those hooks, you can use those awesome hook libraries.\n * (benefit from the react community)\n * For example, swr: https://github.com/zeit/swr\n * (They don't provide rxjs version)\n */\n\nimport React from 'react';\nimport {\n  injectable,\n  WithAutoLifeCycle,\n  LifeCycle,\n  withDIContainer,\n  useObservable,\n  useDIConsumer,\n} from 'react-svs-di';\nimport { Subject, merge } from 'rxjs';\nimport useSWR from 'swr';\nimport { scan, mapTo } from 'rxjs/operators';\n\nasync function mockAPI(id: string) {\n  return new Promise<string>(res => {\n    setTimeout(() => {\n      res(`response for id: ${id}`);\n    }, 300);\n  });\n}\n\n@injectable()\nclass DataSvs implements WithAutoLifeCycle {\n  autoLifeCycle = new LifeCycle();\n\n  private inc$ = new Subject<null>();\n  private dec$ = new Subject<null>();\n\n  private sum$ = merge(\n    this.inc$.pipe(mapTo(1)),\n    this.dec$.pipe(mapTo(-1))\n  ).pipe(scan((acc, v) => acc + v, 0));\n\n  useDataSvsHooks1() {\n    const dataId = useObservable(this.sum$, 0);\n    const { data, isValidating } = useSWR(dataId.toString(), mockAPI);\n    return { data, isValidating };\n  }\n  inc() {\n    this.inc$.next();\n  }\n  dec() {\n    this.dec$.next();\n  }\n}\n\nexport const Demo: React.FC = withDIContainer([DataSvs])(() => {\n  const [dataSvs] = useDIConsumer([DataSvs]);\n  const { data } = dataSvs.useDataSvsHooks1();\n\n  return (\n    <div>\n      <h1>ConsumerHook Demo</h1>\n      <p>{data ? data : 'loading'}</p>\n      <button\n        onClick={() => {\n          dataSvs.inc();\n        }}\n      >\n        increase data id\n      </button>\n      <button\n        onClick={() => {\n          dataSvs.dec();\n        }}\n      >\n        decrease data id\n      </button>\n    </div>\n  );\n});\n\nexport default {\n  title: 'plugin-hook: consumer-hook',\n};\n",locationsMap:{}}},title:"plugin-hook: consumer-hook"}},683:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Demo",(function(){return Demo}));var react_svs_di__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(325),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),__decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},addSourceDecorator=(__webpack_require__(8).withSource,__webpack_require__(8).addSource),someObservable$=rxjs__WEBPACK_IMPORTED_MODULE_1__.a(1e3),Demo=addSourceDecorator((function(){var _a=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),showChild=_a[0],setShowChild=_a[1];return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("h1",null,"LifeCycle Demo"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("button",{type:"button",onClick:function(){setShowChild((function(v){return!v}))}},"toggle showChild")),showChild&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Child,null))}),{__STORY__:"import { injectable, withDIContainer, WithDIContainerHook } from 'react-svs-di';\nimport * as Rx from 'rxjs';\nimport React, { useState, useEffect } from 'react';\n\nconst someObservable$ = Rx.interval(1000);\n\nexport const Demo: React.FC = () => {\n  const [showChild, setShowChild] = useState(false);\n\n  return (\n    <div>\n      <h1>LifeCycle Demo</h1>\n      <div>\n        <button\n          type=\"button\"\n          onClick={() => {\n            setShowChild(v => !v);\n          }}\n        >\n          toggle showChild\n        </button>\n      </div>\n      {showChild && <Child />}\n    </div>\n  );\n};\n\n@injectable()\nclass LifeCycleMonitorSvs implements WithDIContainerHook {\n  // DIContainerHook is called in the DIContainer HOC\n  useDIContainerHook() {\n    useEffect(() => {\n      console.log('Service Mounted!');\n      const sub = someObservable$.subscribe(v => {\n        console.log('get value', v);\n      });\n      return () => {\n        console.log('Service unMounted!');\n        sub.unsubscribe();\n      };\n    }, []);\n  }\n}\n\n// DIContainer HOC as the wrapper of Child\nconst Child: React.FC = withDIContainer([LifeCycleMonitorSvs])(() => {\n  return <p>Child</p>;\n});\n\nexport default {\n  title: 'plugin-hook: container-hook',\n};\n",__ADDS_MAP__:{},__MAIN_FILE_LOCATION__:"/2.7-di-container-hook.s.tsx",__MODULE_DEPENDENCIES__:[],__LOCAL_DEPENDENCIES__:{},__SOURCE_PREFIX__:"/home/csr/react-rxdi/stories/plugin-hook",__IDS_TO_FRAMEWORKS__:{}}),LifeCycleMonitorSvs=function(){function LifeCycleMonitorSvs(){}return LifeCycleMonitorSvs.prototype.useDIContainerHook=function(){Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){console.log("Service Mounted!");var sub=someObservable$.subscribe((function(v){console.log("get value",v)}));return function(){console.log("Service unMounted!"),sub.unsubscribe()}}),[])},LifeCycleMonitorSvs=__decorate([Object(react_svs_di__WEBPACK_IMPORTED_MODULE_0__.e)()],LifeCycleMonitorSvs)}(),Child=Object(react_svs_di__WEBPACK_IMPORTED_MODULE_0__.h)([LifeCycleMonitorSvs])((function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p",null,"Child")}));__webpack_exports__.default={parameters:{storySource:{source:"import { injectable, withDIContainer, WithDIContainerHook } from 'react-svs-di';\nimport * as Rx from 'rxjs';\nimport React, { useState, useEffect } from 'react';\n\nconst someObservable$ = Rx.interval(1000);\n\nexport const Demo: React.FC = () => {\n  const [showChild, setShowChild] = useState(false);\n\n  return (\n    <div>\n      <h1>LifeCycle Demo</h1>\n      <div>\n        <button\n          type=\"button\"\n          onClick={() => {\n            setShowChild(v => !v);\n          }}\n        >\n          toggle showChild\n        </button>\n      </div>\n      {showChild && <Child />}\n    </div>\n  );\n};\n\n@injectable()\nclass LifeCycleMonitorSvs implements WithDIContainerHook {\n  // DIContainerHook is called in the DIContainer HOC\n  useDIContainerHook() {\n    useEffect(() => {\n      console.log('Service Mounted!');\n      const sub = someObservable$.subscribe(v => {\n        console.log('get value', v);\n      });\n      return () => {\n        console.log('Service unMounted!');\n        sub.unsubscribe();\n      };\n    }, []);\n  }\n}\n\n// DIContainer HOC as the wrapper of Child\nconst Child: React.FC = withDIContainer([LifeCycleMonitorSvs])(() => {\n  return <p>Child</p>;\n});\n\nexport default {\n  title: 'plugin-hook: container-hook',\n};\n",locationsMap:{}}},title:"plugin-hook: container-hook"}}},[[327,1,2]]]);
//# sourceMappingURL=main.003de0e3dad97634ab52.bundle.js.map